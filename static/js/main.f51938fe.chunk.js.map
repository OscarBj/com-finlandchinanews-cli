{"version":3,"sources":["actions/article.js","App.js","serviceWorker.js","reducers/AuthReducer.js","reducers/ArticleReducer.js","reducers/ConfigReducer.js","reducers/index.js","index.js","actions/authentication.js","utils.js","templates/SimpleArticle.js","components/MainPage.js","actions/types.js","actions/configuration.js","Routes.js","components/ManagementPage.js","components/CreateArticlePage.js","templates/ArticleBase.js","templates/ArticleTemplate6.js","components/ArticlePage.js"],"names":["endpoint","requestingArticles","type","LOADING_ARTICLES","loading_articles","receiveArticles","_articles","ARTICLES_RECEIVED","articles","setArticleInfo","article","ARTICLE_INFO","payload","gotoArticle","dispatch","setArticleFilter","filter","ARTICLE_FILTER","updateArticle","config","method","headers","localStorage","getItem","body","JSON","stringify","console","log","fetch","then","response","json","message","status","Promise","reject","catch","err","createArticle","deleteArticle","id","callback","getArticle","getArticles","auth","sort","a","b","Date","date","App","Boolean","window","location","hostname","match","INITIAL_STATE","isFetching","isAuthenticated","errorMessage","user","id_token","login_success","article_info","isMobileDevice","offsetTop","combineReducers","ArticleReducer","state","action","AuthReducer","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_SUCCESS","ConfigReducer","DEVICE_TYPE","OFFSET_TOP","offset_top","store","createStore","reducers","applyMiddleware","thunkMiddleware","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","require","logoutUser","LOGOUT_REQUEST","removeItem","loginUser","creds","name","password","requestLogin","setItem","access_token","receiveLogin","resetStatistics","getStatistics","stats","months","SimpleArticle","paragraphs","text","img_url","renderParagraphs","bind","renderEditor","renderArticle","prevProps","prevState","this","props","editArticle","layoutData","layoutDataCallback","className","style","margin","display","flexDirection","alignItems","padding","maxWidth","fontFamily","color","position","fontSize","background","fontWeight","title","flex","width","innerWidth","Image","src","fontfamily","marginLeft","marginRight","eval","getMonth","getFullYear","split","map","item","i","key","url","href","size","history","tags","tag","index","onClick","event","preventDefault","stopPropagation","push","scrollTo","paddingLeft","paddingRight","paddingBottom","wordWrap","sources","md","Prepend","Text","as","aria-label","setState","height","onChange","target","value","defaultValue","placeholder","aria-describedby","showArticle","Component","mapStateToProps","conf","connect","MainPage","mainFigureNode","React","createRef","length","loading","animation","variant","toLowerCase","includes","border","overflow","Title","Body","Img","_id","maxHeight","objectFit","lead","to","outline","ref","marginTop","lineHeight","setMobileDevice","isMobile","setMobile","setOffsetTop","offset","setOffset","Routes","search","showLogin","navExpanded","navbarRef","searchRef","onlogin","onlogout","setNavExpanded","closeNav","current","usr","pw","currentTarget","elements","aboutRef","contactRef","Header","basename","textAlign","backgroundPosition","backgroundImage","paddingTop","collapseOnSelect","expand","onToggle","expanded","Toggle","aria-controls","Collapse","Item","Link","in","Control","boxShadow","borderColor","evt","hash","textDecoration","exact","path","renderAbout","renderContact","onSubmit","handleSubmit","float","required","ManagementPage","statistics","_this","pathname","edit","draggable","published","CreateArticlePage","getArticleLayoutData","undefined","selectedLayout","template","preview","toISOString","author","publish","titleNode","dateNode","authorNode","leadNode","sourcesNode","tagsNode","publishNode","renderLayout","saveArticle","setLayoutData","data","newArticle","checked","InputGroup","onSelect","eventKey","mt","m","defaultChecked","htmlFor","ArticleTemplate6","Container","Figure","ArticlePage","articleId","query","onpopstate","startsWith","find","element","Card","textAling","handleGotoArticle","Spinner","renderArticlePreviews"],"mappings":"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","file":"static/js/main.f51938fe.chunk.js","sourcesContent":["import {LOADING_ARTICLES, ARTICLES_RECEIVED, ARTICLE_INFO, ARTICLE_FILTER} from \"../actions/types\";\r\n\r\nconst endpoint_remote = \"https://aqueous-coast-74759.herokuapp.com/\";\r\nconst endpoint_local = \"http://localhost:8080/\";\r\nconst endpoint = endpoint_remote;\r\n\r\nfunction requestingArticles(){\r\n    return {\r\n        type: LOADING_ARTICLES,\r\n        loading_articles: true,\r\n    }\r\n}\r\n\r\nfunction receiveArticles(_articles){\r\n  return {\r\n    type: ARTICLES_RECEIVED,\r\n    articles: _articles,\r\n    loading_articles: false,\r\n  }\r\n}\r\n\r\nfunction setArticleInfo(article){\r\n    return {\r\n        type: ARTICLE_INFO,\r\n        payload: article,\r\n        loading_articles: false,\r\n    }\r\n}\r\n\r\nexport function gotoArticle(article){\r\n\r\n    return (dispatch) => {\r\n        dispatch(setArticleInfo(article));\r\n    }\r\n}\r\n\r\nexport function setArticleFilter(filter){\r\n\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: ARTICLE_FILTER,\r\n            payload: filter\r\n        })\r\n    }\r\n}\r\n\r\nexport function updateArticle(article){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')},\r\n        body: JSON.stringify(article)\r\n    };\r\n\r\n    return () => {\r\n        console.log(\"Updating article to server..\");\r\n        return fetch(endpoint + 'updateArticle', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n                // If there was a problem, we want to\r\n                // dispatch the error condition\r\n                console.log(message);\r\n\r\n                // dispatch(loginError(user.message));\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message);\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n                //dispatch(receiveArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function createArticle(article){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')},\r\n        body: JSON.stringify(article)\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'createArticle', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n                // If there was a problem, we want to\r\n                // dispatch the error condition\r\n                console.log(message);\r\n\r\n                // dispatch(loginError(user.message));\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message);\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n                //dispatch(receiveArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function deleteArticle(id, callback = null){\r\n    let config = {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded','access_token':localStorage.getItem('access_token')},\r\n    }\r\n    return () => {\r\n        return fetch(endpoint + 'deleteArticle/' + id, config)\r\n            .then(response =>\r\n            response.json()\r\n                .then(message =>({message,response}))\r\n            ).then(({message, response}) => {\r\n\r\n                    if(response.status != 200){\r\n                        console.log(\"Failed to delete article\");\r\n                        return Promise.reject(message);\r\n                    } else {\r\n                        console.log(message);\r\n                        if(callback!=null){\r\n                            callback();\r\n                        }\r\n                    }\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getArticle(id, callback = null){\r\n    let config = {\r\n        method: 'GET',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'},\r\n    }\r\n    return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + 'getArticle/' + id, config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(article => ({ article, response }))\r\n                ).then(({ article, response }) =>  {\r\n\r\n                // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Failed to get article \"+id);\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(article)\r\n            } else {\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', article); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n\r\n                dispatch(setArticleInfo(article))\r\n\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getArticles(auth = false){\r\n\r\n        let config = auth === false ? {\r\n        method: 'GET',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'}\r\n        } : {\r\n            method: 'GET',\r\n            headers: { 'Content-Type':'application/x-www-form-urlencoded','access_token':localStorage.getItem('access_token')}\r\n        }\r\n//`name=${creds.username}&password=${creds.password}`\r\n    return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + (auth === false ? 'getArticles' : 'getManageArticles') , config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(articles => ({ articles, response }))\r\n                ).then(({ articles, response }) =>  {\r\n\r\n    // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Error getting articles\");\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(articles)\r\n            } else {\r\n                articles = articles.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n              // If login was successful, set the token in local storage\r\n              //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n              // Dispatch the success action\r\n                dispatch(receiveArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n\r\n}","import React from 'react';\n//import './App.css';\nimport Route from './Routes';\n\nfunction App() {\n  return (\n      <Route/>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT_SUCCESS} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: false,\r\n    isAuthenticated: localStorage.getItem('access_token') ? true : false,\r\n    errorMessage: '',\r\n    user: null,\r\n    id_token: null,\r\n    login_success: false,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type){\r\n        case LOGIN_REQUEST:\r\n            return {...state, isFetching: true, isAuthenticated: false, user: action.payload};\r\n        case LOGIN_SUCCESS:\r\n            return {...state, isFetching: false, isAuthenticated: true, errorMessage: ''};\r\n        case LOGIN_FAILURE:\r\n            return {...state, isFetching: false, isAuthenticated: false, errorMessage: action.errorMessage};\r\n        case LOGOUT_SUCCESS:\r\n            return {...state, login_success: true, isFetching: true, isAuthenticated: false};\r\n        default:\r\n            return state;\r\n    }\r\n};","import {LOADING_ARTICLES, ARTICLE_INFO, ARTICLES_RECEIVED, ARTICLE_FILTER} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    article_info: null,\r\n    loading_articles: false,\r\n    articles: [],\r\n    filter:\"\",\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type){\r\n        case LOADING_ARTICLES:\r\n            return {...state, loading_articles: action.loading_articles}\r\n        case ARTICLE_INFO:\r\n            return  {...state, article_info: action.payload, loading_articles: action.loading_articles};\r\n        case ARTICLES_RECEIVED:\r\n            return {...state, articles: action.articles, loading_articles: action.loading_articles};\r\n        case ARTICLE_FILTER:\r\n            return {...state, filter: action.payload};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {DEVICE_TYPE, OFFSET_TOP} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    isMobileDevice: false,\r\n    offsetTop:0,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case DEVICE_TYPE:\r\n            return {...state, isMobileDevice: action.isMobileDevice};\r\n        case OFFSET_TOP:\r\n            return {...state, offsetTop: action.offset_top};\r\n        default:\r\n            return state;\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport AuthReducer from \"./AuthReducer\";\r\nimport ArticleReducer from \"./ArticleReducer\";\r\nimport ConfigReducer from \"./ConfigReducer\";\r\n\r\nexport default combineReducers({\r\n    ArticleReducer,\r\n    AuthReducer,\r\n    ConfigReducer\r\n});\r\n\r\n","import React from 'react';\nimport { render } from 'react-dom'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { createStore, applyMiddleware } from 'redux'\nimport { Provider } from 'react-redux'\nimport reducers from './reducers/index'\nimport thunkMiddleware from 'redux-thunk'\n\nconst store = createStore(reducers, {}, applyMiddleware(thunkMiddleware));\n\nrender(\n    <Provider store={store}>\n    <App />\n    </Provider>, document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import {\r\n    LOGIN_FAILURE,\r\n    LOGIN_REQUEST,\r\n    LOGIN_SUCCESS,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_REQUEST\r\n} from \"../actions/types\";\r\nconst { stringify } = require('querystring');\r\n\r\nconst endpoint_remote = \"https://aqueous-coast-74759.herokuapp.com/\";\r\nconst endpoint_local = \"http://localhost:8080/\";\r\nconst endpoint = endpoint_remote;\r\n\r\nfunction requestLogin(creds) {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n    isFetching: true,\r\n    isAuthenticated: false,\r\n    user: creds\r\n  }\r\n}\r\n\r\nfunction receiveLogin(user) {\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n    isFetching: false,\r\n    isAuthenticated: true,\r\n    id_token: user.id_token\r\n  }\r\n}\r\n\r\nfunction loginError(message) {\r\n  return {\r\n    type: LOGIN_FAILURE,\r\n    isFetching: false,\r\n    isAuthenticated: false,\r\n    errorMessage: message,\r\n  }\r\n}\r\n\r\nfunction requestLogout() {\r\n  return {\r\n    type: LOGOUT_REQUEST,\r\n    isFetching: true,\r\n    isAuthenticated: true\r\n  }\r\n}\r\n\r\nfunction receiveLogout() {\r\n  return {\r\n    type: LOGOUT_SUCCESS,\r\n    isFetching: false,\r\n    isAuthenticated: false\r\n  }\r\n}\r\n\r\nexport function logoutUser(){\r\n  return dispatch => {\r\n    dispatch(requestLogout())\r\n    localStorage.removeItem('access_token')\r\n    dispatch(receiveLogout())\r\n  }\r\n}\r\n\r\nexport function loginUser(creds){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'},\r\n        body: stringify({name:creds.name,password:creds.password})\r\n    }\r\n    return (dispatch) => {\r\n        dispatch(requestLogin(creds));\r\n        return fetch(endpoint + 'login', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(user => ({ user, response }))\r\n                ).then(({ user, response }) =>  {\r\n\r\n            // Login not successfull\r\n            if (response.status !== 200) {\r\n                console.log(\"Login failed\");\r\n              return Promise.reject(user)\r\n\r\n            // Login successfull\r\n            } else {\r\n                // If login was successful, set the token in local storage\r\n                localStorage.setItem('access_token', user.access_token);\r\n                // Dispatch the success action\r\n                dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => dispatch(loginError(err.message)))\r\n    }\r\n\r\n}\r\n\r\nexport function resetStatistics(callback = null){\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')}\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'resetStatistics', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            if (response.status !== 200) {\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message)\r\n                if(callback != null){\r\n                    callback();\r\n                }\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getStatistics(callback = null){\r\n\r\n    let config = {\r\n        method: 'GET',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')}\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'getStatistics', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(stats => ({ stats, response }))\r\n                ).then(({ stats, response }) =>  {\r\n\r\n            if (response.status !== 200) {\r\n              return Promise.reject(stats)\r\n            } else {\r\n                console.log(stats);\r\n                if(callback != null){\r\n                    callback(stats);\r\n                }\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}","\r\nexport const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n","import React,{Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\r\nimport {setArticleFilter} from \"../actions/article\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\nimport {FacebookIcon, FacebookShareButton, TwitterIcon, TwitterShareButton, LinkedinIcon, LinkedinShareButton} from \"react-share\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {months} from \"../utils\";\r\n\r\nclass SimpleArticle extends Component{\r\n    constructor(){\r\n        super();\r\n\r\n        this.state={\r\n            paragraphs: 0,\r\n            text: \"\",\r\n            img_url: \"\",\r\n            date:new Date(),\r\n        };\r\n\r\n        this.renderParagraphs.bind(this);\r\n        this.renderEditor.bind(this);\r\n        this.renderArticle.bind(this);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState){\r\n        if(this.props.editArticle && prevState.text !== this.state.text || prevState.img_url !== this.state.img_url || prevProps.layoutData === null) {\r\n            //console.log(\"text/img updated\");\r\n            this.props.layoutDataCallback({text: this.state.text === \"\" ? this.props.layoutData.text : this.state.text, img_url: this.state.img_url === \"\" ? this.props.layoutData.img_url : this.state.img_url});\r\n        }\r\n    }\r\n\r\n    renderArticle(){\r\n        //let article = this.props.editArticle ? this.props.article : this.props.article_info;\r\n        //console.log(article);\r\n        return(\r\n            <Container className=\"bg-white\">\r\n            <div>\r\n                <div style={{margin: this.props.isMobileDevice ? '0' : '2rem', display:'flex', flexDirection:'column', alignItems:'center'}}>\r\n                <div style={{padding: this.props.isMobileDevice ? '0' : '1rem', maxWidth: this.props.isMobileDevice ? 'auto' : '35rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n\r\n                    <a style={{display: 'inline', fontSize: this.props.isMobileDevice ? '2rem' : '3rem', background: 'rgba(0,0,0,0.5)', fontWeight:'Bold'}}>{this.props.editArticle ? this.props.title : this.props.article_info.title}</a>\r\n                {/*<p>{this.props.editArticle ? this.props.lead : this.props.article_info.lead}</p>*/}\r\n\r\n                </div>\r\n                    <Figure style={{flex:1, width: this.props.isMobileDevice ? window.innerWidth+'px' : '40rem'}}>\r\n                        <Figure.Image\r\n                            src={this.props.editArticle ? this.props.layoutData.img_url : this.props.article_info.img_url} // WILL GENERATE ERRORS\r\n                        />\r\n                    </Figure>\r\n                </div>\r\n                <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '10rem'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '10rem')}}>\r\n                <p style={{fontSize:'0.8rem'}}>\r\n\r\n                    {months[new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getMonth()]}{\" \"}{new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getFullYear()}\r\n\r\n                        {/*, By {this.props.editArticle ? this.props.author : this.props.article_info.author}*/}\r\n                </p>\r\n                {this.props.editArticle ? this.props.layoutData.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>) :\r\n                    this.props.article_info.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>)\r\n                }\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"bg-light p-4\">\r\n\r\n                    <Row className=\"row-cols-xs-1  mt-1\">\r\n                        {/*<FacebookShareButton className=\"m-2\" url={window.location.href}><span><FacebookIcon size={32}/></span></FacebookShareButton>*/}\r\n                        <TwitterShareButton className=\"m-2\" url={window.location.href}><span><TwitterIcon size={32}/></span></TwitterShareButton>\r\n                        <LinkedinShareButton className=\"m-2\" url={window.location.href}><span><LinkedinIcon size={32}/></span></LinkedinShareButton>\r\n                        <Route render={({history}) => (\r\n                            <div className=\"m-2\">\r\n                                {(this.props.editArticle ? this.props.tags : this.props.article_info.tags).split(\",\").map((tag,index) => (\r\n                                <a key={index} className=\"m-1 bg-secondary\" href=\"#\" onClick={(event) => {\r\n                                        event.preventDefault();\r\n                                        event.stopPropagation();\r\n                                        if(!this.props.editArticle) {\r\n                                            this.props.setArticleFilter(tag);\r\n                                            history.push('/mainpage');\r\n                                            window.scrollTo(0, this.props.offsetTop);\r\n                                        }\r\n                                    }}\r\n                                    style={{color:'white', paddingLeft:\"1rem\", paddingRight:\"1rem\"}}\r\n                                >\r\n                                    {tag}\r\n                                </a>\r\n                                ))}\r\n                            </div>\r\n                        )}/>\r\n                    </Row>\r\n\r\n                    <div style={{paddingLeft:'1rem', paddingRight:'1rem', paddingBottom:'1rem', wordWrap:'break-word'}}>\r\n                        Sources:\r\n                        <br/>\r\n                        <a>\r\n                            {this.props.editArticle ? this.props.sources : this.props.article_info.sources}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderParagraphs(){\r\n        let paragraphs = [];\r\n        for(let i=0; i<this.state.paragraphs;i++){\r\n            paragraphs.push(\r\n            <Row>\r\n            <Col md={10}>\r\n            <InputGroup key={i}>\r\n                <InputGroup.Prepend>\r\n                    <InputGroup.Text>Paragraph {i+2}</InputGroup.Text>\r\n                </InputGroup.Prepend>\r\n                <FormControl as=\"textarea\" aria-label=\"Paragraph\"/>\r\n            </InputGroup>\r\n            </Col>\r\n            <Col md={2}>\r\n               <Button className=\"btn-danger\" size=\"sm\" onClick={() => this.setState({\r\n                   paragraphs: this.state.paragraphs-1,\r\n               })} >x</Button>\r\n            </Col>\r\n            </Row>\r\n            );\r\n        }\r\n\r\n        return (<Container>{paragraphs}</Container>);\r\n    }\r\n\r\n    renderEditor(){\r\n        return(\r\n            <div style={{padding:0,margin:0,width:\"100%\"}}>\r\n                <InputGroup style={{height:\"15rem\"}}>\r\n                    <InputGroup.Prepend>\r\n                    <InputGroup.Text>Article text</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        onChange={(event) => this.setState({text:event.target.value})}\r\n                        as=\"textarea\"\r\n                        aria-label=\"Paragraph\"\r\n                        defaultValue={this.props.layoutData.text}\r\n                    />\r\n                </InputGroup>\r\n                {/*<Button disabled={true} size=\"sm\" onClick={() => this.setState({\r\n                       paragraphs: this.state.paragraphs+1,\r\n                   })} >Add</Button>\r\n\r\n                */}\r\n                {this.renderParagraphs()}\r\n\r\n\r\n                <InputGroup className=\"mt-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Image url:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        onChange={(event) => this.setState({img_url:event.target.value})}\r\n                        placeholder=\"image url\"\r\n                        aria-label=\"image url\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue={this.props.layoutData.img_url}\r\n                    />\r\n                </InputGroup>\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return(\r\n        <div>\r\n        {this.props.editArticle &&\r\n            this.renderEditor()\r\n        }\r\n        {this.props.showArticle &&\r\n            this.renderArticle()\r\n        }\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        article_info: article.article_info,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    setArticleFilter,\r\n})(SimpleArticle);","import {Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport React from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {loginUser, logoutUser} from \"../actions/authentication\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, setArticleFilter} from '../actions/article';\r\nimport {\r\n    Link\r\n} from \"react-router-dom\";\r\nimport {FacebookShareButton, TwitterShareButton, FacebookIcon, TwitterIcon} from 'react-share';\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport {months} from \"../utils\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\n\r\nclass MainPage extends Component {\r\n\r\n    constructor(){\r\n        super();\r\n\r\n        this.mainFigureNode = React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.articles.length===0) {\r\n            this.props.getArticles();\r\n        }\r\n    }\r\n\r\n    renderArticle(article){\r\n        this.props.gotoArticle(article)\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Container style={{margin: this.props.isMobileDevice ? 0 : 'auto', padding: this.props.isMobileDevice ? 0 : 'auto'}}>\r\n\r\n                {this.props.loading &&\r\n                    <div className=\"text-center m-5\">\r\n                        <Spinner animation=\"border\" variant=\"success\"/>\r\n                    </div>\r\n                }\r\n\r\n                {this.props.articles.map((article,index) => (\r\n                    <div key={index}>\r\n                        {(this.props.filter === \"\" || article.title.toLowerCase().includes(this.props.filter.toLowerCase()) || article.tags.toLowerCase().includes(this.props.filter.toLowerCase())) &&\r\n\r\n                                    <div>\r\n                                        {!this.props.isMobileDevice && index === 0 && this.props.filter === \"\" ?\r\n                                            <div className=\"mt-4\" style={{\r\n                                                width: '100%',\r\n                                                border: 'none',\r\n                                                overflow:'hidden'\r\n                                            }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                <div className=\"row\">\r\n                                                    <div ref = {ref => this.mainFigureNode = ref} className=\"col-md-6\">\r\n                                                    <Route render={({history}) => (\r\n                                                        <Figure className=\"img-fluid\" style={{\r\n                                                                height: 'auto',\r\n                                                                maxWidth: '40rem',\r\n                                                                objectFit: 'cover'\r\n                                                            }}>\r\n                                                            <Figure.Image onClick={() => {\r\n                                                                history.push('/article/' + article._id);\r\n                                                                this.renderArticle(article);\r\n                                                                window.scrollTo(0,this.props.offsetTop);\r\n                                                            }} src={article.img_url}/>\r\n                                                        </Figure>\r\n                                                    )}/>\r\n                                                    </div>\r\n                                                    <Route render={({history}) => (\r\n                                                        <div style={{maxWidth:'25rem', marginLeft:'2rem', marginTop:'1rem', height:'auto', fontSize:'2rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n                                                            <a href=\"#\"\r\n                                                               onClick={(event) => {\r\n                                                                   event.preventDefault();\r\n                                                                   event.stopPropagation();\r\n                                                                   history.push('/article/' + article._id);\r\n                                                                    this.renderArticle(article);\r\n                                                                    window.scrollTo(0,this.props.offsetTop);\r\n                                                                }}\r\n                                                               className=\"text-left\" style={{\r\n                                                                fontSize:'2.2rem',\r\n                                                                lineHeight:'1.8rem',\r\n                                                                color:'white',\r\n                                                                display: 'inline',\r\n                                                                background: 'rgba(0,0,0,0.5)',\r\n                                                                fontWeight: 'Bold',\r\n                                                            }}>{article.title}\r\n                                                            </a>\r\n                                                        </div>\r\n                                                    )}/>\r\n                                                    <div className=\"col-md-5 m-3\">\r\n                                                        <div className=\"row justify-content-start\">\r\n                                                            <a className=\"mr-1\">\r\n                                                                {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                            </a>\r\n                                                            <div>\r\n                                                                {article.tags.split(\",\").map((tag, index) => (\r\n                                                                    <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                       href=\"#\" onClick={(event) => {\r\n                                                                        event.preventDefault();\r\n                                                                        event.stopPropagation();\r\n                                                                        this.props.setArticleFilter(tag);\r\n                                                                        window.scrollTo(0,this.props.offsetTop);\r\n                                                                    }}\r\n                                                                       style={{\r\n                                                                           margin: 'auto',\r\n                                                                           color: 'white',\r\n                                                                           paddingLeft: \"1rem\",\r\n                                                                           paddingRight: \"1rem\"\r\n                                                                       }}\r\n                                                                    >\r\n                                                                        {tag}\r\n                                                                    </a>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <Card.Text className=\"row mt-2\" style={{\r\n                                                            fontSize: '1.2rem',\r\n                                                            fontFamily: 'Helvetica'\r\n                                                        }}>{article.lead}</Card.Text>\r\n                                                        <div className=\"row\">\r\n                                                            <Link className=\"text-success\" to={\"/article/\" + article._id} style={{outline:'0'}}\r\n                                                                  onClick={() => {\r\n                                                                      this.renderArticle(article);\r\n                                                                      window.scrollTo(0,this.props.offsetTop);\r\n                                                                  }}>Read\r\n                                                                more</Link>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n\r\n                                            :\r\n                                            <div>\r\n                                            {this.props.isMobileDevice ?\r\n                                                <Card className=\"mt-4 bg-light\" style={{\r\n                                                    width: window.innerWidth + 'px',\r\n                                                    //left: this.props.isMobileDevice ? 0 : '5%',\r\n                                                    border: 'none',\r\n                                                    overflow:'hidden'\r\n                                                }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                    <Card.Title className=\"col m-1\" style={{\r\n                                                        fontWeight: 'Bold',\r\n                                                        fontSize: \"1.6rem\",\r\n                                                        fontFamily: 'Helvetica'\r\n                                                    }}>{article.title}</Card.Title>\r\n\r\n                                                    <Card.Body className=\"row\">\r\n                                                        <Route render={({history}) => (\r\n                                                            <Card.Img onClick={() => {\r\n                                                                history.push('/article/' + article._id);\r\n                                                                this.renderArticle(article);\r\n                                                                window.scrollTo(0,this.props.offsetTop);\r\n                                                            }} className=\"img-fluid col-md-4\" style={{\r\n                                                                maxHeight: 'auto',\r\n                                                                width: window.innerWidth + 'px',\r\n                                                                objectFit: 'cover'\r\n                                                            }} src={article.img_url}/>\r\n                                                        )}/>\r\n                                                        <div className=\"col-md-7 m-3\">\r\n                                                            <div className=\"row justify-content-start\">\r\n                                                                <a className=\"mr-1\">\r\n                                                                    {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                                </a>\r\n                                                                <div>\r\n                                                                    {article.tags.split(\",\").map((tag, index) => (\r\n                                                                        <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                           href=\"#\" onClick={(event) => {\r\n                                                                            event.preventDefault();\r\n                                                                            event.stopPropagation();\r\n                                                                            this.props.setArticleFilter(tag);\r\n                                                                            window.scrollTo(0,this.props.offsetTop);\r\n                                                                        }}\r\n                                                                           style={{\r\n                                                                               margin: 'auto',\r\n                                                                               color: 'white',\r\n                                                                               paddingLeft: \"1rem\",\r\n                                                                               paddingRight: \"1rem\"\r\n                                                                           }}\r\n                                                                        >\r\n                                                                            {tag}\r\n                                                                        </a>\r\n                                                                    ))}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <Card.Text className=\"row mt-2\" style={{\r\n                                                                fontSize: '1.2rem',\r\n                                                                fontFamily: 'Helvetica'\r\n                                                            }}>{article.lead}</Card.Text>\r\n                                                            <div className=\"row\">\r\n                                                                <Link className=\"text-success\" to={\"/article/\" + article._id} style={{outline:'0'}}\r\n                                                                      onClick={() => {\r\n                                                                          this.renderArticle(article);\r\n                                                                          window.scrollTo(0,this.props.offsetTop);\r\n                                                                      }}>Read\r\n                                                                    more</Link>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n\r\n                                                :\r\n\r\n                                                <div className=\"mt-4\" style={{\r\n                                                width: '90%',\r\n                                                //left: this.props.isMobileDevice ? 0 : '5%',\r\n                                                border: 'none',\r\n                                                overflow:'hidden'\r\n                                            }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                {/*<Card.Title className=\"col m-1\" style={{\r\n                                                    fontWeight: 'Bold',\r\n                                                    fontSize: \"1.6rem\",\r\n                                                    fontFamily: 'Helvetica'\r\n                                                }}>{article.title}</Card.Title>\r\n*/}\r\n                                                <div className=\"row\">\r\n                                                    <div className=\"col-md-4\">\r\n                                                        <Route render={({history}) => (\r\n                                                            <Figure\r\n                                                                className=\"img-fluid\"\r\n                                                                style={{\r\n                                                                    maxHeight: '20rem',\r\n                                                                    width: 'auto',\r\n                                                                    objectFit: 'cover'\r\n                                                                }}\r\n                                                            >\r\n                                                                <Figure.Image onClick={() => {\r\n                                                                    history.push('/article/' + article._id);\r\n                                                                    this.renderArticle(article);\r\n                                                                    window.scrollTo(0,this.props.offsetTop);\r\n                                                                    }}\r\n\r\n                                                                    src={article.img_url}/>\r\n\r\n                                                            </Figure>\r\n                                                        )}/>\r\n                                                    </div>\r\n                                                    <div className=\"col-md-8\">\r\n                                                        <div className=\"row\">\r\n                                                            <Route render={({history}) => (\r\n                                                                <a href=\"#\"\r\n                                                                   onClick={(event) => {\r\n                                                                       event.preventDefault();\r\n                                                                       event.stopPropagation();\r\n                                                                       history.push('/article/' + article._id);\r\n                                                                       this.renderArticle(article);\r\n                                                                       window.scrollTo(0, this.props.offsetTop);\r\n                                                                   }}\r\n                                                                   style={{\r\n                                                                       fontSize: '2rem',\r\n                                                                       color: 'black',\r\n                                                                       fontFamily: 'Helvetica',\r\n                                                                       fontWeight: 'Bold'\r\n                                                                   }}\r\n                                                                >\r\n                                                                    {article.title}\r\n                                                                </a>\r\n                                                            )}/>\r\n\r\n                                                            <a className=\"mr-1\">\r\n                                                                {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                            </a>\r\n                                                            <div>\r\n                                                                {article.tags.split(\",\").map((tag, index) => (\r\n                                                                    <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                       href=\"#\" onClick={(event) => {\r\n                                                                        event.preventDefault();\r\n                                                                        event.stopPropagation();\r\n                                                                        this.props.setArticleFilter(tag);\r\n                                                                        window.scrollTo(0,this.props.offsetTop);\r\n                                                                    }}\r\n                                                                       style={{\r\n                                                                           margin: 'auto',\r\n                                                                           color: 'white',\r\n                                                                           paddingLeft: \"1rem\",\r\n                                                                           paddingRight: \"1rem\"\r\n                                                                       }}\r\n                                                                    >\r\n                                                                        {tag}\r\n                                                                    </a>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n\r\n                                                        <div className=\"row\">\r\n                                                            <Link className=\"text-success\" to={\"/article/\" + article._id} style={{outline:'0'}}\r\n                                                                  onClick={() => {\r\n                                                                      this.renderArticle(article);\r\n                                                                      window.scrollTo(0,this.props.offsetTop);\r\n                                                                  }}>Read more\r\n                                                            </Link>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            }\r\n                                            </div>\r\n\r\n                                        }\r\n                                    </div>\r\n                        }\r\n\r\n                    </div>\r\n\r\n                ))}\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        articles: article.articles,\r\n        loading: article.loading_articles,\r\n        filter: article.filter,\r\n        isAuthenticated: auth.isAuthenticated,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticles,\r\n    gotoArticle,\r\n    setArticleFilter\r\n})(MainPage);","export const LOGIN_REQUEST = 'login_request';\r\nexport const LOGIN_SUCCESS = 'login_success';\r\nexport const LOGIN_FAILURE = 'login_failure';\r\n\r\nexport const LOGOUT_SUCCESS = 'logout_success';\r\nexport const LOGOUT_REQUEST = 'logout_request';\r\n\r\nexport const ARTICLES_RECEIVED = 'articles_received';\r\nexport const ARTICLE_INFO = 'article_info';\r\nexport const ARTICLE_FILTER = 'article_filter';\r\nexport const LOADING_ARTICLES = 'loading_articles';\r\n\r\nexport const DEVICE_TYPE = 'device_type';\r\nexport const OFFSET_TOP = 'offset_top';","import {DEVICE_TYPE, OFFSET_TOP} from \"../actions/types\";\r\n\r\nfunction setMobile(isMobile) {\r\n  return {\r\n    type: DEVICE_TYPE,\r\n    isMobileDevice:isMobile,\r\n  }\r\n}\r\n\r\nfunction setOffset(offset){\r\n    return {\r\n        type: OFFSET_TOP,\r\n        offset_top: offset,\r\n    }\r\n}\r\n\r\nexport function setMobileDevice(isMobile){\r\n     return (dispatch) => {\r\n         dispatch(setMobile(isMobile));\r\n     }\r\n}\r\n\r\nexport function setOffsetTop(offset){\r\n    return (dispatch) => {\r\n        dispatch(setOffset(offset));\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {\r\n    HashRouter,\r\n    Switch,\r\n    Redirect,\r\n    Route,\r\n    Link,\r\n    useHistory,\r\n} from \"react-router-dom\";\r\nimport MainPage from \"./components/MainPage\";\r\nimport ArticlePage from \"./components/ArticlePage\";\r\nimport ManagementPage from \"./components/ManagementPage\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {loginUser, logoutUser} from \"./actions/authentication\";\r\nimport {setArticleFilter} from \"./actions/article\";\r\nimport {setMobileDevice, setOffsetTop} from \"./actions/configuration\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport CreateArticlePage from \"./components/CreateArticlePage\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {Row,Col} from \"react-bootstrap\";\r\nimport Collapse from \"react-bootstrap/Collapse\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\n\r\n\r\nclass Routes extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = ({\r\n            search: false,\r\n            showLogin: false,\r\n            navExpanded: false,\r\n        });\r\n\r\n        this.navbarRef = React.createRef();\r\n        this.searchRef = React.createRef();\r\n\r\n        this.onlogin.bind(this);\r\n        this.onlogout.bind(this);\r\n        this.setNavExpanded.bind(this);\r\n        this.closeNav.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.setOffsetTop(this.navbarRef.current.offsetTop);\r\n        this.props.setMobileDevice(window.innerWidth<500);\r\n    }\r\n\r\n    setNavExpanded() {\r\n        this.setState({ navExpanded: true});\r\n    }\r\n\r\n    closeNav() {\r\n        this.setState({ navExpanded: false });\r\n    }\r\n\r\n    onlogin(usr,pw){\r\n        console.log(\"login...\");\r\n        let user={\r\n            name:usr,\r\n            password:pw\r\n        }\r\n        this.props.loginUser(user)\r\n    }\r\n\r\n    onlogout(){\r\n        console.log(\"logout...\");\r\n        this.props.logoutUser();\r\n    }\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        if(this.props.isAuthenticated){\r\n            this.onlogout();\r\n        }else{\r\n            this.onlogin(event.currentTarget.elements[0].value,event.currentTarget.elements[1].value)\r\n        }\r\n    }\r\n\r\n    renderAbout(){\r\n\r\n        return(\r\n            <Container ref={this.aboutRef} className=\"bg-white pt-2\">\r\n            <div>\r\n                <div style={{display:'flex', flexDirection:'column', alignItems:'center'}}>\r\n                    <div style={{marginTop: this.props.isMobileDevice ? 0 : '2rem', height:'auto', fontSize:'2rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n                        <a style={{fontSize:'3rem', display: 'inline', background: 'rgba(0,0,0,0.5)', fontWeight:'Bold'}}>About <br/> Finland China News</a>\r\n                    </div>\r\n\r\n                    <Figure style={{margin: this.props.isMobileDevice ? 0 : '2rem', flex:1,height:'auto', width: this.props.isMobileDevice ? window.innerWidth+'px' : '50%'}}>\r\n                        <Figure.Image\r\n                        src={this.props.isMobileDevice ? \"https://defaultwebresources.blob.core.windows.net/resources/china-4456833_640.jpg\" : \"https://defaultwebresources.blob.core.windows.net/resources/china-4456833_1920.jpg\"}\r\n                        />\r\n                    </Figure>\r\n                </div>\r\n                <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '25%'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '25%')}}>\r\n                    Finland China News was established with the goal to build and expand the Finland China business community. The aim for this platform is to help companies and people make better decisions through access to highly relevant information.\r\n                    <br/>\r\n                    <br/>\r\n                    Today, there are around 400 Finnish companies in China, and around 100 Chinese companies in Finland. Our vision is to become the leading knowledge platform for accessing information that affect the companies, investors and people in this market.\r\n                </div>\r\n            </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderContact(){\r\n        return(\r\n            <Container ref={this.contactRef} className=\"fluid pt-5\" style={{maxWidth:\"50rem\",border:\"none\"}}>\r\n                <Card>\r\n                    <Card.Header className=\"text-center\" style={{fontFamily:'Tw Cen MT', fontSize:\"1.5rem\"}}>Contact Information</Card.Header>\r\n                    <Row>\r\n                    <Col style={{maxWidth:\"10%\"}}>\r\n                            <div className=\"bg-success\" style={{height:\"100%\",width:\"1rem\"}}></div>\r\n                    </Col>\r\n                        <Col className=\"col-xs-16 col-sm-16 col-md-16\">\r\n                        <Card.Body>\r\n                            <Card.Text style={{fontFamily:'Verdana'}}>\r\n                                Want to get involved, or suggest a good piece of news? We would love to hear your feedback:\r\n                                <br/>\r\n                                <br/>\r\n                                <a href=\"mailto:finlandchinanews@outlook.com\">finlandchinanews@outlook.com</a>\r\n                            </Card.Text>\r\n                        </Card.Body>\r\n                    </Col>\r\n                    </Row>\r\n                </Card>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <HashRouter basename=\"/\">\r\n                <div className=\"logo\" style={{textAlign:\"center\", backgroundPosition:\"center\", height:\"15rem\", backgroundImage: this.props.isMobileDevice ? `url(https://defaultwebresources.blob.core.windows.net/resources/road-4564817_640.jpg)` : `url(https://defaultwebresources.blob.core.windows.net/resources/road-4564817_1920.jpg)`}}>\r\n                    <h1 style={{paddingTop:\"3rem\", textAlign: \"center\", fontFamily: \"Tw Cen MT\", color:\"white\", fontSize:'3rem'}}>FINLAND CHINA NEWS<p>芬 中 新 闻​</p></h1>\r\n                </div>\r\n                <Navbar\r\n                    ref={this.navbarRef}\r\n                    onClick={() => {\r\n                        if(this.state.search){\r\n                            this.setState({\r\n                                search:false\r\n                            });\r\n                    }\r\n                    this.props.setArticleFilter(\"\");\r\n                    this.searchRef.value = \"\";\r\n                    }}\r\n                    collapseOnSelect\r\n                    className=\"bg-light\"\r\n                    expand=\"lg\"\r\n                    onToggle={() => {\r\n                        this.setState({\r\n                                navExpanded:!this.state.navExpanded,\r\n                            });\r\n                    }}\r\n                    expanded={this.state.navExpanded}\r\n                    id=\"responsive-navbar-nav\"\r\n                    >\r\n                    <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                    <Navbar.Collapse>\r\n                        <Nav className=\"justify-content-center\" style={{ width: \"100%\"}}>\r\n                            <Nav.Item onClick={() => this.setState({navExpanded:false})}>\r\n                                <Link to={\"/mainpage\"} className=\"nav-link mr-5 ml-5 text-center\" style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>HOME</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item onClick={() => {\r\n                                window.scrollTo(0, this.props.offsetTop);\r\n                                this.setState({navExpanded:false});\r\n                            }} className=\"mr-5 ml-5 text-center\">\r\n                                <Link className=\"nav-link\" to={\"/about\"} style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>ABOUT</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item  onClick={() => {\r\n                                window.scrollTo(0, this.props.offsetTop);\r\n                                this.setState({navExpanded:false});\r\n                            }} className=\"mr-5 ml-5 text-center\">\r\n                                <Link className=\"nav-link\" to={\"/contact\"} style={{outline:'0',fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>CONTACT</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item  onClick={() => this.setState({navExpanded:false})} className=\"mr-5 ml-5 text-center\">\r\n                                    <Nav.Link onClick={() => this.setState({search:!this.state.search})} style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>SEARCH</Nav.Link>\r\n                                </Nav.Item>\r\n                        </Nav>\r\n                    </Navbar.Collapse>\r\n                </Navbar>\r\n\r\n                <Collapse in={this.state.search}>\r\n                    <Container>\r\n                        <Route render={({history}) => (\r\n                            <Form.Control ref={ref => this.searchRef = ref} style={{outline:'0', boxShadow:'none', borderColor:'green'}} className=\"mt-2 text-center\" placeholder=\"search for article\" onChange={(evt) => {\r\n                                this.props.setArticleFilter(evt.target.value.toLowerCase());\r\n                                if(window.location.hash !== '#/mainpage'){\r\n                                    history.push('/mainpage');\r\n                                }\r\n                            }}/>\r\n                        )}/>\r\n                    </Container>\r\n                </Collapse>\r\n\r\n                {this.props.filter !== \"\" && window.location.hash === '#/mainpage' &&\r\n                    <Container style={{display:'flex', flexDirection:'row', marginTop:'1rem'}}>\r\n                            <a  href=\"#\"\r\n                                onClick={(event) => {\r\n                                    event.preventDefault();\r\n                                    event.stopPropagation();\r\n                                    this.props.setArticleFilter(\"\");\r\n                                    this.setState({search:false});\r\n                                    this.searchRef.value = \"\";\r\n                                }}\r\n                                className=\"text-secondary\"\r\n                                style={{fontSize:'1.2rem', textDecoration:'none', flex:0.1, border:'none', background:'transparent'}}\r\n                            >&#10060;</a>\r\n                            <a style={{fontFamily:'Helvetica', marginLeft:'1rem', fontSize:'1.2rem', flex:5}}>Showing articles with keyword '{this.props.filter}':</a>\r\n\r\n                    </Container>\r\n                }\r\n\r\n                <Switch>\r\n                    <Route exact path=\"/\">\r\n                        <Redirect to=\"/mainpage\" />\r\n                    </Route>\r\n                    <Route path=\"/mainpage\">\r\n                        <MainPage/>\r\n                    </Route>\r\n                    <Route path=\"/article\">\r\n                        <ArticlePage/>\r\n                    </Route>\r\n                    <Route path=\"/about\">\r\n                        {this.renderAbout()}\r\n                    </Route>\r\n                    <Route path=\"/contact\">\r\n                        {this.renderContact()}\r\n                    </Route>\r\n                    {this.props.isAuthenticated &&\r\n                    <Route path=\"/management\">\r\n                        <ManagementPage/>\r\n                    </Route>\r\n                    }\r\n                    {this.props.isAuthenticated &&\r\n                    <Route path=\"/create\" render={(props) => <CreateArticlePage {...props}/>}/>\r\n                    }\r\n                </Switch>\r\n\r\n                <div style={{width:\"100%\", height:\"8rem\", textAlign:\"center\", fontFamily:'Helvetica', fontSize:'1rem'}}>\r\n                    <p style={{marginTop:\"5rem\"}}>Finland China News 2020</p>\r\n                </div>\r\n\r\n                <Collapse in={this.state.showLogin}>\r\n                    <Container style={{position:\"relative\"}}>\r\n                    <Form onSubmit={this.handleSubmit.bind(this)} className=\"align-text-bottom\">\r\n                        {!this.props.isAuthenticated &&\r\n                            <Row className=\"justify-content-center row-cols-sm-3\" style={{margin:\"auto\",float:\"none\"}}>\r\n                                <Col className=\"col-sm-2\">\r\n                                    <Form.Control required style={{paddingRight:\"0\", marginRight:\"0\"}} size=\"sm\" placeholder=\"username\"/>\r\n                                </Col>\r\n                                <Col className=\"col-sm-2\">\r\n                                    <Form.Control required size=\"sm\" type=\"password\" placeholder=\"password\"/>\r\n                                </Col>\r\n                                <Col className=\"col-sm-1\">\r\n                                    <Button className=\"btn-secondary\" size=\"sm\" type=\"submit\" >Login</Button>\r\n                                    <a href=\"#\" style={{color:\"red\", fontSize:\"0.7rem\"}}>\r\n                                        {this.props.errorMessage}\r\n                                    </a>\r\n                                </Col>\r\n                            </Row>\r\n                        }\r\n\r\n                        {this.props.isAuthenticated &&\r\n                        <Row className=\"justify-content-center row-cols-sm-2\" style={{margin:\"auto\",float:\"none\",width:\"60%\"}}>\r\n                            <Col className=\"col-sm-2\">\r\n                                <Route render={({history}) => (\r\n                                <Button className=\"btn-secondary\" size=\"sm\" onClick={() => history.push('/')} type=\"submit\" >Logout</Button>\r\n                                    )}/>\r\n                            </Col>\r\n                            <Col className=\"col-sm-2\">\r\n                                <Route render={({history}) => (\r\n                                    <Button className=\"btn-secondary\" size=\"sm\" onClick={() => history.push('/management')} >Manage</Button>\r\n                                )}/>\r\n                            </Col>\r\n                        </Row>\r\n                        }\r\n                    </Form>\r\n                    </Container>\r\n                </Collapse>\r\n\r\n                <div style={{width:\"100%\", height:\"5rem\", textAlign:\"center\"}}>\r\n                <a className=\"ml-1 mr-1 text-secondary\"\r\n                 href=\"#\" onClick={(event) => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    this.setState({showLogin:!this.state.showLogin});\r\n                }}\r\n                   style={{\r\n                       outline:'0',\r\n                       textDecoration:'none',\r\n                       fontSize:'2rem',\r\n                       fontWeight:'Bold',\r\n                       paddingLeft: \"1rem\",\r\n                       paddingRight: \"1rem\"\r\n                   }}\r\n                >\r\n                    ...\r\n                </a>\r\n                </div>\r\n            </HashRouter>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const articles = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        article_info: articles.article_info,\r\n        filter: articles.filter,\r\n        isAuthenticated: auth.isAuthenticated,\r\n        errorMessage: auth.errorMessage,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    loginUser,\r\n    logoutUser,\r\n    setArticleFilter,\r\n    setMobileDevice,\r\n    setOffsetTop,\r\n})(Routes);","import React,{Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, deleteArticle} from \"../actions/article\";\r\nimport {getStatistics, resetStatistics} from '../actions/authentication';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\n\r\nclass ManagementPage extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = ({\r\n            createArticle: false,\r\n            statistics: null,\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Make sure to get all - manage\r\n        let _this = this;\r\n        this.props.getArticles(this.props.isAuthenticated);\r\n        this.props.getStatistics((stats) => _this.setState({statistics:stats}));\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <Container style={{padding:\"2rem\"}}>\r\n                <Row className=\"m-2\">\r\n                    <Col>\r\n                        <a style={{fontWeight:'Bold', fontSize:'1.5rem'}}>Manage articles</a>\r\n                    </Col>\r\n                    <Col>\r\n                        <Route render={({history}) => (\r\n                        <Button size=\"sm\" onClick={() => {\r\n                                history.push({pathname:'/create',state:{edit: false, article:null}});\r\n                                }\r\n                            }\r\n                            >New Article</Button>\r\n                        )}/>\r\n                    </Col>\r\n                </Row>\r\n                    <Container>\r\n                        {this.props.articles.map((article,index) => (\r\n\r\n                            <Card key={index} className=\"mt-1 bg-light\" style={{border:'none'}} draggable={true}\r\n                                  /*onDragOver={(evt) => {\r\n                                      evt.preventDefault();\r\n                                      console.log(\"over\")\r\n                                  }}\r\n                                  onDragStart={(evt) => {\r\n                                      evt.dataTransfer.setData(\"article-id\",article._id);\r\n                                      evt.dataTransfer.setData(\"article-order\",index);\r\n                                      console.log(\"drag\");\r\n                                  }}\r\n                                  onDrop={(evt) => {\r\n                                      console.log(article._id);\r\n                                      console.log(evt.dataTransfer.getData(\"article-id\"));\r\n                                  }}*/\r\n                            >\r\n                                <Card.Body>\r\n                                    <Row>\r\n                                <Col md={8}>\r\n                                    <Card.Text style={{fontSize:'1rem'}}>{article.title}</Card.Text>\r\n                                </Col>\r\n\r\n                                        <Col md={2}>\r\n                                            {/*<input className=\"mr-2\" id=\"publish\" type=\"checkbox\" disabled={true} defaultChecked={article.published}/>\r\n                                            <label htmlFor=\"publish\">Published</label>*/}\r\n                                            <Badge variant={article.published ? \"success\" : \"dark\"}>{article.published ? 'Published' : 'Not Published'}</Badge>\r\n                                        </Col>\r\n                                    <Col md={2}>\r\n                                        <Button size=\"sm bg-danger\" className=\"m-1\" style={{border:'none'}}\r\n                                            onClick={() => {\r\n                                                let _this = this;\r\n                                                this.props.deleteArticle(article._id, () => _this.props.getArticles(this.props.isAuthenticated));\r\n                                            }}\r\n                                        >Delete</Button>\r\n                                        <Route render={({history}) => (\r\n                                        <Button size=\"sm\" className=\"m-1 bg-secondary\" style={{border:'none'}}\r\n                                            onClick={() => {\r\n                                                history.push({pathname:'/create',state:{edit: true, article: article}});\r\n\r\n                                                }\r\n                                            }\r\n                                        >Edit</Button>\r\n                                        )}/>\r\n                                    </Col>\r\n                                    </Row>\r\n                                </Card.Body>\r\n                            </Card>\r\n                        ))}\r\n                        {this.state.statistics !== null &&\r\n                        <Container className=\"mt-3\">\r\n                            <a style={{fontWeight:'Bold'}}>Requests/Page visits</a>\r\n                            <Badge variant=\"secondary\" className=\"m-1\">{this.state.statistics.length}</Badge>\r\n                            <br/>\r\n                            <Button size=\"sm\" className=\"m-1\" onClick={() =>{\r\n                                let _this = this;\r\n                                this.props.resetStatistics(() => {_this.setState({statistics:[]})});\r\n                            }}>Reset</Button>\r\n                        </Container>\r\n                        }\r\n                        </Container>\r\n\r\n\r\n            </Container>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    return {\r\n        articles: article.articles,\r\n        isAuthenticated: auth.isAuthenticated\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticles,\r\n    gotoArticle,\r\n    deleteArticle,\r\n    getStatistics,\r\n    resetStatistics\r\n})(ManagementPage);","import React,{Component} from \"react\";\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport SimpleArticle from \"../templates/SimpleArticle\";\r\nimport {createArticle, updateArticle} from \"../actions/article\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\n\r\n\r\nclass CreateArticlePage extends Component{\r\n    constructor(props){\r\n        super();\r\n\r\n        this.getArticleLayoutData.bind(this);\r\n\r\n        if(props.location.state !== undefined && props.location.state.edit){\r\n            this.state = ({\r\n                selectedLayout: props.location.state.article.template,\r\n                paragraphs: 0,\r\n                preview: false,\r\n                title: props.location.state.article.title,\r\n                date: new Date(props.location.state.article.date).toISOString(),\r\n                author: props.location.state.article.author,\r\n                lead: props.location.state.article.lead,\r\n                sources: props.location.state.article.sources,\r\n                tags: props.location.state.article.tags,\r\n                template: props.location.state.article.template,\r\n                layoutData: this.getArticleLayoutData(props.location.state.article),\r\n                publish:props.location.state.article.published,\r\n            });\r\n        } else {\r\n            this.state = ({\r\n                selectedLayout: \"Layout template\",\r\n                paragraphs: 0,\r\n                preview: false,\r\n                title: \"\",\r\n                date: new Date().toISOString(),\r\n                author: \"\",\r\n                lead: \"\",\r\n                sources: \"\",\r\n                tags: \"\",\r\n                template: \"\",\r\n                layoutData: null,\r\n                publish:false\r\n            });\r\n        }\r\n\r\n\r\n        this.titleNode = React.createRef();\r\n        this.dateNode = React.createRef();\r\n        this.authorNode = React.createRef();\r\n        this.leadNode = React.createRef();\r\n        this.sourcesNode = React.createRef();\r\n        this.tagsNode = React.createRef();\r\n        this.publishNode = React.createRef();\r\n\r\n        this.renderLayout.bind(this);\r\n        this.saveArticle.bind(this);\r\n        this.setLayoutData.bind(this);\r\n\r\n        this.article = {\r\n            title:this.state.title,\r\n            date:this.state.date,\r\n            author:this.state.author,\r\n            lead:this.state.lead,\r\n            sources:this.state.sources,\r\n            tags:this.state.tags,\r\n            template:this.state.template,\r\n        }\r\n    }\r\n\r\n    getArticleLayoutData(article){\r\n        switch (article.template) {\r\n            case \"Simple\":\r\n                return {text:article.text, img_url:article.img_url}\r\n            default:\r\n                return {text:\"\", img_url:\"\"}\r\n        }\r\n    }\r\n\r\n    setLayoutData(data){\r\n        console.log(\"setting layout data\");\r\n        this.setState({\r\n            layoutData: data,\r\n        })\r\n    }\r\n\r\n    saveArticle(){\r\n\r\n        if(!this.props.location.state.edit) {\r\n            let newArticle = {\r\n                title:this.state.title,\r\n                date:this.state.date,\r\n                author:this.state.author,\r\n                lead:this.state.lead,\r\n                sources:this.state.sources,\r\n                tags:this.state.tags,\r\n                template:this.state.template,\r\n                layoutData: this.state.layoutData,\r\n                published: this.publishNode.checked,\r\n            };\r\n            this.props.createArticle(newArticle);\r\n        } else {\r\n            let newArticle = {\r\n                id: this.props.location.state.article._id,\r\n                title:this.state.title === \"\" ? this.props.location.state.article.title : this.state.title,\r\n                date:this.state.date=== \"\" ? this.props.location.state.article.date: this.state.date,\r\n                author:this.state.author === \"\" ? this.props.location.state.article.author : this.state.author,\r\n                lead:this.state.lead === \"\" ? this.props.location.state.article.lead : this.state.lead,\r\n                sources:this.state.sources === \"\" ? this.props.location.state.article.sources : this.state.sources,\r\n                tags:this.state.tags === \"\" ? this.props.location.state.article.tags : this.state.tags,\r\n                template:this.state.template === \"\" ? this.props.location.state.article.template : this.state.template,\r\n                published: this.publishNode.checked,\r\n                ...this.state.layoutData,\r\n            };\r\n            this.props.updateArticle(newArticle);\r\n        }\r\n    }\r\n\r\n    renderLayout(event){\r\n        this.setState({\r\n            selectedLayout:event,\r\n            template:event,\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div style={{padding:\"1rem\"}}>\r\n                <h2>Create new article</h2>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Article Title:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"title\"\r\n                        aria-label=\"title\"\r\n                        aria-describedby=\"label\"\r\n                        ref = {this.titleNode}\r\n                        defaultValue = {this.state.title}\r\n                        onChange = {(event) => this.setState({title:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Date:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        type=\"date\"\r\n                        placeholder=\"date\"\r\n                        aria-label=\"date\"\r\n                        aria-describedby=\"date\"\r\n                        ref = {this.dateNode}\r\n                        defaultValue={new Date(this.state.date).toISOString().split(\"T\")[0]}\r\n                        //value =\r\n                        onChange = {(event) => this.setState({date:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Author:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"author name\"\r\n                        aria-label=\"Author\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.author}\r\n                        onChange = {(event) => this.setState({author:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                      <InputGroup.Text>Lead:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        as=\"textarea\"\r\n                        placeholder=\"lead text\"\r\n                        aria-label=\"Lead\"\r\n                        ref = {this.leadNode}\r\n                        defaultValue = {this.state.lead}\r\n                        onChange = {(event) => this.setState({lead:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Sources:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"sources\"\r\n                        aria-label=\"sources\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.sources}\r\n                        onChange = {(event) => this.setState({sources:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mt-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Tags:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"tags separated by comma\"\r\n                        aria-label=\"tags\"\r\n                        aria-describedby=\"tags\"\r\n                        ref = {this.tagsNode}\r\n                        defaultValue = {this.state.tags}\r\n                        onChange = {(event) => this.setState({tags:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mt-3 mb-3\">\r\n                    <DropdownButton\r\n                        as={InputGroup.Prepend}\r\n                        variant=\"outline-secondary\"\r\n                        title={this.state.selectedLayout}\r\n                        id=\"input-group-dropdown-1\"\r\n                        onSelect={(event) => {\r\n                            this.renderLayout(event);\r\n                        }}\r\n                    >\r\n                      <Dropdown.Item eventKey=\"Simple\">Simple</Dropdown.Item>\r\n                      <Dropdown.Item eventKey=\"Basic\">Basic</Dropdown.Item>\r\n                      <Dropdown.Item eventKey=\"Custom\">Complex</Dropdown.Item>\r\n                    </DropdownButton>\r\n\r\n                </InputGroup>\r\n\r\n                {this.state.selectedLayout !== \"Layout template\" &&\r\n                    <h3>{this.state.selectedLayout} Article Layout</h3>\r\n                }\r\n\r\n            {this.state.selectedLayout === \"Simple\" &&\r\n                <div mt={2}>\r\n                <SimpleArticle\r\n                    editArticle={true}\r\n                    showArticle={this.state.preview}\r\n\r\n                    title={this.state.title}\r\n                    author={this.state.author}\r\n                    lead={this.state.lead}\r\n                    sources={this.state.sources}\r\n                    tags={this.state.tags}\r\n                    date={this.state.date}\r\n                    layoutData={this.state.layoutData == null ? {text:\"\", img_url:\"\"} : this.state.layoutData}\r\n                    layoutDataCallback={(data) => this.setLayoutData(data)}\r\n                />\r\n\r\n                <Button style={{marginTop:\"2rem\"}} size=\"sm\" onClick={() => this.setState({preview:!this.state.preview})}>\r\n\r\n                    {this.state.preview &&\r\n                    <a>Hide preview</a>\r\n                    }\r\n                    {!this.state.preview &&\r\n                    <a>Show preview</a>\r\n                    }\r\n\r\n                </Button>\r\n\r\n                </div>\r\n            }\r\n\r\n            <Container style={{marginTop:\"2rem\"}}>\r\n            <Row>\r\n                <Col md={2} m={1}>\r\n                    <input ref={ref => this.publishNode = ref}\r\n                        defaultChecked = {this.state.publish}\r\n                        className=\"mr-2\" id=\"publish\" type=\"checkbox\" onChange={(event) => {\r\n                            this.setState({publish:event.target.checked});\r\n                    }}/>\r\n                    <label htmlFor=\"publish\">Publish</label>\r\n                </Col>\r\n                <Col md={2}>\r\n                    <Route render={({history}) => (\r\n                        <Button className=\"m-1\" size=\"sm\" onClick={() => {\r\n                            this.saveArticle();\r\n                            history.push('/management');\r\n                        }} >Save</Button>\r\n                    )}/>\r\n                </Col>\r\n                <Col md={2}>\r\n                    <Route render={({history}) => (\r\n                        <Button className=\"m-1\" size=\"sm\" onClick={() => history.push('/management')} >Cancel</Button>\r\n                    )}/>\r\n                </Col>\r\n            </Row>\r\n            </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    return {\r\n        articles: article.articles,\r\n        isAuthenticated: auth.isAuthenticated\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    createArticle,\r\n    updateArticle\r\n})(CreateArticlePage);","import {Component} from \"react\";\r\n\r\nexport default class ArticleBase extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n}","import ArticleBase from \"./ArticleBase\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, getArticle} from \"../actions/article\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport React, {Component} from \"react\";\r\nimport MainPage from \"../components/MainPage\";\r\n\r\nclass ArticleTemplate6 extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Container>\r\n            <h2>{this.props.article_info.title}</h2>\r\n            <p>{this.props.article_info.lead}</p>\r\n            <p>{this.props.article_info.tag}</p>\r\n            <Figure>\r\n                <Figure.Image\r\n                    src={this.props.article_info.img_url}\r\n                />\r\n            </Figure>\r\n            <p>{this.props.article_info.text}</p>\r\n            </Container>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    return {\r\n        //article_info: article.article_info,\r\n        //articles: article.articles,\r\n        isAuthenticated: auth.isAuthenticated\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticle,\r\n    getArticles,\r\n    gotoArticle\r\n})(ArticleTemplate6);","import {Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport React from \"react\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, getArticle} from \"../actions/article\";\r\nimport ArticleTemplate6 from \"../templates/ArticleTemplate6\";\r\nimport {\r\n    Link\r\n} from \"react-router-dom\";\r\nimport SimpleArticle from \"../templates/SimpleArticle\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\n\r\nclass ArticlePage extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = ({\r\n            articleId:\"\",\r\n        });\r\n    }\r\n\r\n    UNSAFE_componentWillMount(){\r\n        if(this.props.article_info == null){\r\n            let query = window.location.hash.split('#/article/')[1];\r\n            this.setState({articleId:query});\r\n            this.props.getArticle(query);\r\n        }\r\n        if(this.props.articles.length === 0){\r\n            this.props.getArticles();\r\n        }\r\n\r\n\r\n        // Handle browser back button\r\n        window.onpopstate = () => {\r\n            if(window.location.hash.startsWith('#/article/')){\r\n                let query = window.location.hash.split('#/article/')[1];\r\n                let article = this.props.articles.find(element => element._id === query);\r\n\r\n                if(article !== null){\r\n                    this.props.gotoArticle(article);\r\n                }\r\n                else{\r\n                    this.props.getArticle(query);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    renderArticle() {\r\n        //window.scrollTo(0,this.props.offsetTop);\r\n        if(this.props.article_info) {\r\n            switch (this.props.article_info.template) {\r\n                case \"Simple\":\r\n                    return (<SimpleArticle\r\n                        editArticle={false}\r\n                        showArticle={true}\r\n                        title={this.props.article_info.title}\r\n                        author={this.props.article_info.author}\r\n                        lead={this.props.article_info.lead}\r\n                        sources={this.props.article_info.sources}\r\n                        tag={this.props.article_info.tags}\r\n                        layoutDataCallback={(data) => console.log(data)}\r\n                    />)\r\n                case 6:\r\n                    return (<ArticleTemplate6 article_info={this.props.article_info}/>);\r\n                default:\r\n                    return (<ArticleTemplate6 article_info={this.props.article_info}/>);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleGotoArticle(article){\r\n        this.props.gotoArticle(article);\r\n        window.scrollTo(0,this.props.offsetTop);\r\n        //window.scrollTo(0, 100);\r\n    }\r\n\r\n    renderArticlePreviews(){\r\n        return(\r\n            this.props.articles.map((article,index) => (\r\n                (this.props.article_info == null ? this.state.articleId : this.props.article_info._id)!== article._id &&\r\n                    <Card key={index} className=\"mt-4 bg-light\" style={{border:'none'}} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                        <Card.Title className=\"mt-3 ml-3\" style={{textAling:'left', fontWeight:'Bold', fontFamily:'Helvetica', fontSize:\"1.5rem\"}}>{article.title}</Card.Title>\r\n\r\n                        <Card.Body className=\"row\">\r\n                            <Route render={({history}) => (\r\n                                <Card.Img onClick={() => {\r\n                                    history.push('/article/'+article._id);\r\n                                    this.handleGotoArticle(article);\r\n                                }} className=\"img-fluid col-md-4\" style={{maxHeight:'20rem', width:'auto', objectFit:'cover'}} src={article.img_url} />\r\n                            )}/>\r\n                            <Card.Text className=\"col-md-5\" style={{fontFamily:'Helvetica'}}>{article.lead}</Card.Text>\r\n                            <Link className=\"col-md-2 mr-0 text-success\" to={\"/article/\"+article._id} style={{outline:'0'}} onClick={() => this.handleGotoArticle(article)}>Read more</Link>\r\n                        </Card.Body>\r\n                    </Card>\r\n                )\r\n            )\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Container>\r\n                {this.props.loading &&\r\n                    <div className=\"text-center m-5\">\r\n                        <Spinner animation=\"border\" variant=\"success\"/>\r\n                    </div>\r\n                }\r\n                <Container className=\"bg-white\" style={{}}>\r\n                    {this.renderArticle()}\r\n                </Container>\r\n                <Container style={{marginTop:\"5rem\"}}>\r\n                    <h4 style={{fontFamily:'Helvetica'}}>More articles:</h4>\r\n                    {this.renderArticlePreviews()}\r\n                </Container>\r\n            </Container>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        articles: article.articles,\r\n        loading: article.loading_articles,\r\n        article_info: article.article_info,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticle,\r\n    getArticles,\r\n    gotoArticle\r\n})(ArticlePage);"],"sourceRoot":""}