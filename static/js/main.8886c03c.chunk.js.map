{"version":3,"sources":["templates/ArticleBase.js","templates/ArticleTemplate6.js","components/ArticlePage.js","actions/article.js","App.js","serviceWorker.js","reducers/AuthReducer.js","reducers/ArticleReducer.js","reducers/ConfigReducer.js","reducers/index.js","index.js","utils.js","actions/authentication.js","templates/SimpleArticle.js","templates/CustomArticle.js","components/MainPage.js","actions/types.js","actions/configuration.js","Routes.js","components/ManagementPage.js","components/CreateArticlePage.js"],"names":["Component","ArticleTemplate6","Container","this","props","article_info","title","lead","tag","Figure","Image","src","img_url","text","connect","state","ArticleReducer","isAuthenticated","AuthReducer","getArticle","getArticles","gotoArticle","ArticlePage","articleId","query","window","location","hash","split","setState","articles","length","onpopstate","startsWith","article","find","element","_id","template","SimpleArticle","editArticle","showArticle","titleimg_url","author","sources","tags","layoutData","layoutDataCallback","data","console","log","CustomArticle","scrollTo","offsetTop","map","index","Card","key","className","style","border","Title","textAling","fontWeight","fontFamily","fontSize","Body","render","history","Img","onClick","push","handleGotoArticle","maxHeight","width","objectFit","Text","to","color","outline","Helmet","property","content","name","loading","Spinner","animation","variant","renderArticle","marginTop","renderArticlePreviews","articlesAvailable","textAlign","Button","background","a","checkpoint","conf","ConfigReducer","next_checkpoint","loading_articles","articles_available","endpoint","requestingArticles","type","LOADING_ARTICLES","receiveArticles","_articles","lastbatch","ARTICLES_RECEIVED","setArticleInfo","ARTICLE_INFO","payload","dispatch","setArticleFilter","filter","ARTICLE_FILTER","updateArticle","config","method","headers","localStorage","getItem","body","JSON","stringify","fetch","then","response","json","message","status","Promise","reject","catch","err","createArticle","deleteArticle","id","callback","getManageArticles","MANAGE_ARTICLES_RECEIVED","ids","docs","forEach","includes","lastBatch","NEXT_CHECKPOINT","Date","date","toISOString","getArticlesByKeyWord","keyword","App","Boolean","hostname","match","INITIAL_STATE","isFetching","errorMessage","user","id_token","login_success","manage_articles","batch_checkpoint","isMobileDevice","combineReducers","action","ARTICLES_AVAILABLE","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_SUCCESS","DEVICE_TYPE","OFFSET_TOP","offset_top","store","createStore","reducers","applyMiddleware","thunkMiddleware","document","getElementById","navigator","serviceWorker","ready","registration","unregister","months","require","logoutUser","LOGOUT_REQUEST","removeItem","loginUser","creds","password","requestLogin","setItem","access_token","receiveLogin","resetStatistics","getStatistics","stats","renderEditor","bind","updateLayoutData","margin","display","flexDirection","alignItems","padding","maxWidth","position","flex","innerWidth","fontfamily","marginLeft","marginRight","eval","getMonth","getFullYear","item","i","url","href","size","event","preventDefault","stopPropagation","paddingLeft","paddingRight","paddingBottom","wordWrap","height","Prepend","onChange","target","value","as","aria-label","defaultValue","mapStateToProps","layoutComponents","images","paragraphs","getNewParagraph","getNewImage","getNewPoll","updateComponentData","moveComponent","loadData","component","idx","justifyContent","components","indexOf","arr","old_index","new_index","splice","md","xs","findIndex","placeholder","aria-describedby","paragraphKey","imgkey","disabled","MainPage","mainFigureNode","React","createRef","searchByTag","sort","b","toLowerCase","overflow","ref","lineHeight","auth","setMobileDevice","isMobile","setMobile","setOffsetTop","offset","setOffset","Routes","search","showLogin","navExpanded","navbarRef","searchRef","onlogin","onlogout","setNavExpanded","closeNav","current","usr","pw","currentTarget","elements","Header","basename","backgroundPosition","backgroundImage","paddingTop","collapseOnSelect","expand","onToggle","expanded","Toggle","aria-controls","Collapse","Item","Link","in","Control","boxShadow","borderColor","evt","textDecoration","exact","path","renderAbout","renderContact","onSubmit","handleSubmit","float","required","alt","ManagementPage","statistics","pathname","edit","draggable","published","_this","CreateArticlePage","getArticleLayoutData","undefined","selectedLayout","preview","publish","publishNode","renderLayout","saveArticle","setLayoutData","newArticle","checked","InputGroup","onSelect","eventKey","mt","m","defaultChecked","htmlFor"],"mappings":"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","file":"static/js/main.8886c03c.chunk.js","sourcesContent":["import {Component} from \"react\";\r\n\r\nexport default class ArticleBase extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n}","import ArticleBase from \"./ArticleBase\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, getArticle} from \"../actions/article\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport React, {Component} from \"react\";\r\nimport MainPage from \"../components/MainPage\";\r\n\r\nclass ArticleTemplate6 extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Container>\r\n            <h2>{this.props.article_info.title}</h2>\r\n            <p>{this.props.article_info.lead}</p>\r\n            <p>{this.props.article_info.tag}</p>\r\n            <Figure>\r\n                <Figure.Image\r\n                    src={this.props.article_info.img_url}\r\n                />\r\n            </Figure>\r\n            <p>{this.props.article_info.text}</p>\r\n            </Container>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    return {\r\n        //article_info: article.article_info,\r\n        //articles: article.articles,\r\n        isAuthenticated: auth.isAuthenticated\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticle,\r\n    getArticles,\r\n    gotoArticle\r\n})(ArticleTemplate6);","import {Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport React from \"react\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, getArticle} from \"../actions/article\";\r\nimport ArticleTemplate6 from \"../templates/ArticleTemplate6\";\r\nimport {\r\n    Link\r\n} from \"react-router-dom\";\r\nimport SimpleArticle from \"../templates/SimpleArticle\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport CustomArticle from \"../templates/CustomArticle\";\r\nimport {Helmet} from \"react-helmet\";\r\n\r\nclass ArticlePage extends Component {\r\n\r\n    constructor() {\r\n        super();\r\n        this.state = ({\r\n            articleId:\"\",\r\n        });\r\n    }\r\n\r\n    UNSAFE_componentWillMount(){\r\n        if(this.props.article_info == null){\r\n            let query = window.location.hash.split('#/article/')[1];\r\n            this.setState({articleId:query});\r\n            this.props.getArticle(query);\r\n        }\r\n        if(this.props.articles.length === 0){\r\n            this.props.getArticles([],\"\");\r\n        }\r\n\r\n\r\n        // Handle browser back button\r\n        window.onpopstate = () => {\r\n            if(window.location.hash.startsWith('#/article/')){\r\n                let query = window.location.hash.split('#/article/')[1];\r\n                let article = this.props.articles.find(element => element._id === query);\r\n\r\n                if(article !== null){\r\n                    this.props.gotoArticle(article);\r\n                }\r\n                else{\r\n                    this.props.getArticle(query);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    renderArticle() {\r\n        //window.scrollTo(0,this.props.offsetTop);\r\n        if(this.props.article_info) {\r\n            switch (this.props.article_info.template) {\r\n                case \"Simple\":\r\n                    return (<SimpleArticle\r\n                        editArticle={false}\r\n                        showArticle={true}\r\n                        title={this.props.article_info.title}\r\n                        titleimg_url={this.props.article_info.titleimg_url}\r\n                        author={this.props.article_info.author}\r\n                        lead={this.props.article_info.lead}\r\n                        sources={this.props.article_info.sources}\r\n                        tags={this.props.article_info.tags}\r\n                        layoutData={this.props.article_info.layoutData}\r\n                        layoutDataCallback={(data) => console.log(data)}\r\n                    />);\r\n                case \"Custom\":\r\n                    return (<CustomArticle\r\n                        editArticle={false}\r\n                        showArticle={true}\r\n                        title={this.props.article_info.title}\r\n                        titleimg_url={this.props.article_info.titleimg_url}\r\n                        author={this.props.article_info.author}\r\n                        lead={this.props.article_info.lead}\r\n                        sources={this.props.article_info.sources}\r\n                        tags={this.props.article_info.tags}\r\n                        layoutData={this.props.article_info.layoutData}\r\n                        layoutDataCallback={(data) => console.log(data)}\r\n                    />);\r\n                default:\r\n                    return (<ArticleTemplate6 article_info={this.props.article_info}/>);\r\n            }\r\n        }\r\n    }\r\n\r\n    handleGotoArticle(article){\r\n        this.props.gotoArticle(article);\r\n        window.scrollTo(0,this.props.offsetTop);\r\n        //window.scrollTo(0, 100);\r\n    }\r\n\r\n    renderArticlePreviews(){\r\n        return(\r\n            this.props.articles.map((article,index) => (\r\n                (this.props.article_info == null ? this.state.articleId : this.props.article_info._id)!== article._id &&\r\n                    <Card key={index} className=\"mt-4 bg-light\" style={{border:'none'}} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                        <Card.Title className=\"mt-3 ml-3\" style={{textAling:'left', fontWeight:'Bold', fontFamily:'Helvetica', fontSize:\"1.5rem\"}}>{article.title}</Card.Title>\r\n\r\n                        <Card.Body className=\"row\">\r\n                            <Route render={({history}) => (\r\n                                <Card.Img onClick={() => {\r\n                                    history.push('/article/'+article._id);\r\n                                    this.handleGotoArticle(article);\r\n                                }} className=\"img-fluid col-md-4\" style={{maxHeight:'20rem', width:'auto', objectFit:'cover'}} src={article.titleimg_url} />\r\n                            )}/>\r\n                            <Card.Text className=\"col-md-5\" style={{fontFamily:'Helvetica'}}>{article.lead}</Card.Text>\r\n                            <Link className=\"col-md-2 mr-0\" to={\"/article/\"+article._id} style={{color:'#15632a', outline:'0'}} onClick={() => this.handleGotoArticle(article)}>Read more</Link>\r\n                        </Card.Body>\r\n                    </Card>\r\n                )\r\n            )\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n            <Helmet>\r\n                {/*TODO IMPLEMENT OG AND OTHER TAGS*/}\r\n                <meta property=\"og:title\" content={this.props.article_info === null ? \"Finland China News\" : this.props.article_info.title}/>\r\n                 <meta name=\"twitter:title\" content={this.props.article_info === null ? \"Finland China News\" : this.props.article_info.title}/>\r\n                <title>{this.props.article_info === null ? \"Finland China News\" : this.props.article_info.title}</title>\r\n            </Helmet>\r\n            <Container>\r\n                {this.props.loading &&\r\n                    <div className=\"text-center m-5\">\r\n                        <Spinner animation=\"border\" variant=\"success\"/>\r\n                    </div>\r\n                }\r\n                <Container className=\"bg-white\" style={{}}>\r\n                    {this.renderArticle()}\r\n                </Container>\r\n                <Container style={{marginTop:\"5rem\"}}>\r\n                    <h4 style={{fontFamily:'Helvetica'}}>More articles:</h4>\r\n                    {this.renderArticlePreviews()}\r\n                </Container>\r\n                {this.props.loading &&\r\n                   <div className=\"text-center m-5\">\r\n                        <Spinner animation=\"border\" variant=\"success\"/>\r\n                    </div>\r\n                }\r\n                {this.props.articlesAvailable && !this.props.loading &&\r\n                    <Container style={{marginTop: '2rem', textAlign: 'center'}}>\r\n                        <Button style={{background: '#15632a', fontWeight: 'Bold', outline: '0'}}\r\n                                className=\"rounded-8 btn-sm btn-success\"\r\n                                onClick={() => {\r\n                                    this.props.getArticles(this.props.articles.map(a => a._id), this.props.checkpoint);\r\n                                }}\r\n                        >Show more</Button>\r\n                    </Container>\r\n                }\r\n            </Container>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        articles: article.articles,\r\n        checkpoint: article.next_checkpoint,\r\n        loading: article.loading_articles,\r\n        article_info: article.article_info,\r\n        articlesAvailable: article.articles_available,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticle,\r\n    getArticles,\r\n    gotoArticle\r\n})(ArticlePage);","import {LOADING_ARTICLES, ARTICLES_RECEIVED, ARTICLE_INFO, ARTICLE_FILTER, MANAGE_ARTICLES_RECEIVED, NEXT_CHECKPOINT} from \"../actions/types\";\r\n\r\nconst endpoint_remote = \"https://aqueous-coast-74759.herokuapp.com/\";\r\nconst endpoint_local = \"http://localhost:8080/\";\r\nconst endpoint = endpoint_remote;\r\n\r\nfunction requestingArticles(){\r\n    return {\r\n        type: LOADING_ARTICLES,\r\n        loading_articles: true,\r\n    }\r\n}\r\n\r\nfunction receiveArticles(_articles, lastbatch){\r\n  return {\r\n    type: ARTICLES_RECEIVED,\r\n    articles: _articles,\r\n    articles_available: !lastbatch,\r\n    loading_articles: false,\r\n  }\r\n}\r\n\r\nfunction receiveManageArticles(_articles){\r\n    return {\r\n        type: MANAGE_ARTICLES_RECEIVED,\r\n        articles: _articles,\r\n        loading_articles: false,\r\n    }\r\n}\r\n\r\nfunction setNextCheckpoint(_articles){\r\n    return {\r\n        type: NEXT_CHECKPOINT,\r\n        checkpoint: new Date(_articles[_articles.length-1].date).toISOString(),\r\n    }\r\n}\r\n\r\nfunction setArticleInfo(article){\r\n    return {\r\n        type: ARTICLE_INFO,\r\n        payload: article,\r\n        loading_articles: false,\r\n    }\r\n}\r\n\r\nexport function gotoArticle(article){\r\n\r\n    return (dispatch) => {\r\n        dispatch(setArticleInfo(article));\r\n    }\r\n}\r\n\r\nexport function setArticleFilter(filter){\r\n\r\n    return (dispatch) => {\r\n        dispatch({\r\n            type: ARTICLE_FILTER,\r\n            payload: filter\r\n        })\r\n    }\r\n}\r\n\r\nexport function updateArticle(article){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')},\r\n        body: JSON.stringify(article)\r\n    };\r\n\r\n    return () => {\r\n        console.log(\"Updating article to server..\");\r\n        return fetch(endpoint + 'updateArticle', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n                // If there was a problem, we want to\r\n                // dispatch the error condition\r\n                console.log(message);\r\n\r\n                // dispatch(loginError(user.message));\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message);\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n                //dispatch(receiveArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function createArticle(article){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')},\r\n        body: JSON.stringify(article)\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'createArticle', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n                // If there was a problem, we want to\r\n                // dispatch the error condition\r\n                console.log(message);\r\n\r\n                // dispatch(loginError(user.message));\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message);\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n                //dispatch(receiveArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function deleteArticle(id, callback = null){\r\n    let config = {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded','access_token':localStorage.getItem('access_token')},\r\n    }\r\n    return () => {\r\n        return fetch(endpoint + 'deleteArticle/' + id, config)\r\n            .then(response =>\r\n            response.json()\r\n                .then(message =>({message,response}))\r\n            ).then(({message, response}) => {\r\n\r\n                    if(response.status != 200){\r\n                        console.log(\"Failed to delete article\");\r\n                        return Promise.reject(message);\r\n                    } else {\r\n                        console.log(message);\r\n                        if(callback!=null){\r\n                            callback();\r\n                        }\r\n                    }\r\n            }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getArticle(id, callback = null){\r\n    let config = {\r\n        method: 'GET',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'},\r\n    }\r\n    return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + 'getArticle/' + id, config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(article => ({ article, response }))\r\n                ).then(({ article, response }) =>  {\r\n\r\n                // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Failed to get article \"+id);\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(article)\r\n            } else {\r\n                // If login was successful, set the token in local storage\r\n                //localStorage.setItem('articles', article); // TODO remember to look after these on app entry\r\n                // Dispatch the success action\r\n\r\n                dispatch(setArticleInfo(article))\r\n\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getManageArticles(){\r\n\r\n        let config =  {\r\n            method: 'GET',\r\n            headers: { 'Content-Type':'application/x-www-form-urlencoded','access_token':localStorage.getItem('access_token')}\r\n        };\r\n\r\n    return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + 'getManageArticles' , config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(articles => ({ articles, response }))\r\n                ).then(({ articles, response }) =>  {\r\n\r\n    // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Error getting articles\");\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(articles)\r\n            } else {\r\n                //articles = articles.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n              // If login was successful, set the token in local storage\r\n              //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n              // Dispatch the success action\r\n                dispatch(receiveManageArticles(articles));\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getArticles(ids,checkpoint){\r\n\r\n        let config = {\r\n        method: 'GET',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded', 'batch_checkpoint':checkpoint}\r\n        };\r\n\r\n        return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + 'getArticles' , config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(articles => ({ articles, response }))\r\n                ).then(({ articles, response }) =>  {\r\n\r\n    // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Error getting articles\");\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(articles)\r\n            } else {\r\n                let docs = [];\r\n                // CHECK FOR DUPICATES\r\n                articles.articles.forEach(article => {\r\n                    if(!ids.includes(article._id)){\r\n                        docs.push(article);\r\n                    }\r\n                });\r\n\r\n                dispatch(receiveArticles(docs, articles.lastBatch));\r\n                dispatch(setNextCheckpoint(docs));\r\n                //articles = articles.sort((a,b) => new Date(b.date) - new Date(a.date));\r\n              // If login was successful, set the token in local storage\r\n              //localStorage.setItem('articles', articles); // TODO remember to look after these on app entry\r\n              // Dispatch the success action\r\n             // dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n\r\n}\r\n\r\nexport function getArticlesByKeyWord(ids, keyword, callback = null){\r\n\r\n    let config = {\r\n        method: 'GET',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'}\r\n    };\r\n\r\n        return (dispatch) => {\r\n        dispatch(requestingArticles());\r\n        return fetch(endpoint + 'getArticles/'+keyword , config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(articles => ({ articles, response }))\r\n                ).then(({ articles, response }) =>  {\r\n\r\n    // TODO Fall into response not ok, all is ok atm\r\n            if (response.status !== 200) {\r\n              // If there was a problem, we want to\r\n              // dispatch the error condition\r\n                console.log(\"Error getting articles\");\r\n\r\n              //dispatch(loginError(user.message));\r\n              return Promise.reject(articles)\r\n            } else {\r\n                let docs = [];\r\n                articles.forEach(article => {\r\n                    if(!ids.includes(article._id)){\r\n                        docs.push(article);\r\n                    }\r\n                });\r\n                dispatch(receiveArticles(docs, false));\r\n\r\n                if(callback != null){\r\n                    callback();\r\n                }\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}","import React from 'react';\n//import './App.css';\nimport Route from './Routes';\n\nfunction App() {\n  return (\n      <Route/>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {LOGIN_FAILURE, LOGIN_REQUEST, LOGIN_SUCCESS, LOGOUT_SUCCESS} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    isFetching: false,\r\n    isAuthenticated: localStorage.getItem('access_token') ? true : false,\r\n    errorMessage: '',\r\n    user: null,\r\n    id_token: null,\r\n    login_success: false,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type){\r\n        case LOGIN_REQUEST:\r\n            return {...state, isFetching: true, isAuthenticated: false, user: action.payload};\r\n        case LOGIN_SUCCESS:\r\n            return {...state, isFetching: false, isAuthenticated: true, errorMessage: ''};\r\n        case LOGIN_FAILURE:\r\n            return {...state, isFetching: false, isAuthenticated: false, errorMessage: action.errorMessage};\r\n        case LOGOUT_SUCCESS:\r\n            return {...state, login_success: true, isFetching: true, isAuthenticated: false};\r\n        default:\r\n            return state;\r\n    }\r\n};","import {LOADING_ARTICLES, ARTICLE_INFO, ARTICLES_RECEIVED, ARTICLE_FILTER, ARTICLES_AVAILABLE, MANAGE_ARTICLES_RECEIVED, NEXT_CHECKPOINT} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    article_info: null,\r\n    loading_articles: false,\r\n    articles: [],\r\n    manage_articles: [],\r\n    filter:\"\",\r\n    articles_available: true,\r\n    batch_checkpoint : \"\",\r\n    next_checkpoint:\"\",\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type){\r\n        case LOADING_ARTICLES:\r\n            return {...state, loading_articles: action.loading_articles}\r\n        case ARTICLE_INFO:\r\n            return  {...state, article_info: action.payload, loading_articles: action.loading_articles};\r\n        case ARTICLES_RECEIVED:\r\n            return {...state, articles: [...state.articles, ...action.articles], loading_articles: action.loading_articles, articles_available: action.articles_available};\r\n        case MANAGE_ARTICLES_RECEIVED:\r\n            return {...state, manage_articles: action.articles, loading_articles: action.loading_articles};\r\n        case ARTICLE_FILTER:\r\n            return {...state, filter: action.payload};\r\n        case ARTICLES_AVAILABLE:\r\n            return {...state, articles_available: action.payload};\r\n        case NEXT_CHECKPOINT:\r\n            return {...state, next_checkpoint: action.checkpoint};\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n","import {DEVICE_TYPE, OFFSET_TOP} from \"../actions/types\";\r\n\r\nconst INITIAL_STATE = {\r\n    isMobileDevice: false,\r\n    offsetTop:0,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, action) => {\r\n    switch(action.type) {\r\n        case DEVICE_TYPE:\r\n            return {...state, isMobileDevice: action.isMobileDevice};\r\n        case OFFSET_TOP:\r\n            return {...state, offsetTop: action.offset_top};\r\n        default:\r\n            return state;\r\n    }\r\n}","import {combineReducers} from \"redux\";\r\nimport AuthReducer from \"./AuthReducer\";\r\nimport ArticleReducer from \"./ArticleReducer\";\r\nimport ConfigReducer from \"./ConfigReducer\";\r\n\r\nexport default combineReducers({\r\n    ArticleReducer,\r\n    AuthReducer,\r\n    ConfigReducer\r\n});\r\n\r\n","import React from 'react';\nimport { render } from 'react-dom'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { createStore, applyMiddleware } from 'redux'\nimport { Provider } from 'react-redux'\nimport reducers from './reducers/index'\nimport thunkMiddleware from 'redux-thunk'\n\nconst store = createStore(reducers, {}, applyMiddleware(thunkMiddleware));\n\nrender(\n    <Provider store={store}>\n    <App />\n    </Provider>, document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","\r\nexport const months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n","import {\r\n    LOGIN_FAILURE,\r\n    LOGIN_REQUEST,\r\n    LOGIN_SUCCESS,\r\n    LOGOUT_SUCCESS,\r\n    LOGOUT_REQUEST\r\n} from \"../actions/types\";\r\nconst { stringify } = require('querystring');\r\n\r\nconst endpoint_remote = \"https://aqueous-coast-74759.herokuapp.com/\";\r\nconst endpoint_local = \"http://localhost:8080/\";\r\nconst endpoint = endpoint_remote;\r\n\r\nfunction requestLogin(creds) {\r\n  return {\r\n    type: LOGIN_REQUEST,\r\n    isFetching: true,\r\n    isAuthenticated: false,\r\n    user: creds\r\n  }\r\n}\r\n\r\nfunction receiveLogin(user) {\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n    isFetching: false,\r\n    isAuthenticated: true,\r\n    id_token: user.id_token\r\n  }\r\n}\r\n\r\nfunction loginError(message) {\r\n  return {\r\n    type: LOGIN_FAILURE,\r\n    isFetching: false,\r\n    isAuthenticated: false,\r\n    errorMessage: message,\r\n  }\r\n}\r\n\r\nfunction requestLogout() {\r\n  return {\r\n    type: LOGOUT_REQUEST,\r\n    isFetching: true,\r\n    isAuthenticated: true\r\n  }\r\n}\r\n\r\nfunction receiveLogout() {\r\n  return {\r\n    type: LOGOUT_SUCCESS,\r\n    isFetching: false,\r\n    isAuthenticated: false\r\n  }\r\n}\r\n\r\nexport function logoutUser(){\r\n  return dispatch => {\r\n    dispatch(requestLogout())\r\n    localStorage.removeItem('access_token')\r\n    dispatch(receiveLogout())\r\n  }\r\n}\r\n\r\nexport function loginUser(creds){\r\n\r\n    let config = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type':'application/x-www-form-urlencoded'},\r\n        body: stringify({name:creds.name,password:creds.password})\r\n    }\r\n    return (dispatch) => {\r\n        dispatch(requestLogin(creds));\r\n        return fetch(endpoint + 'login', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(user => ({ user, response }))\r\n                ).then(({ user, response }) =>  {\r\n\r\n            // Login not successfull\r\n            if (response.status !== 200) {\r\n                console.log(\"Login failed\");\r\n              return Promise.reject(user)\r\n\r\n            // Login successfull\r\n            } else {\r\n                // If login was successful, set the token in local storage\r\n                localStorage.setItem('access_token', user.access_token);\r\n                // Dispatch the success action\r\n                dispatch(receiveLogin(user));\r\n            }\r\n      }).catch(err => dispatch(loginError(err.message)))\r\n    }\r\n\r\n}\r\n\r\nexport function resetStatistics(callback = null){\r\n    let config = {\r\n        method: 'POST',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')}\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'resetStatistics', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(message => ({ message, response }))\r\n                ).then(({ message, response }) =>  {\r\n\r\n            if (response.status !== 200) {\r\n              return Promise.reject(message)\r\n            } else {\r\n                console.log(message)\r\n                if(callback != null){\r\n                    callback();\r\n                }\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}\r\n\r\nexport function getStatistics(callback = null){\r\n\r\n    let config = {\r\n        method: 'GET',\r\n        headers: {'Content-Type':'application/json', 'access_token':localStorage.getItem('access_token')}\r\n    };\r\n\r\n    return () => {\r\n        return fetch(endpoint + 'getStatistics', config)\r\n          .then(response =>\r\n            response.json()\r\n                .then(stats => ({ stats, response }))\r\n                ).then(({ stats, response }) =>  {\r\n\r\n            if (response.status !== 200) {\r\n              return Promise.reject(stats)\r\n            } else {\r\n                if(callback != null){\r\n                    callback(stats);\r\n                }\r\n            }\r\n      }).catch(err => console.log(err))\r\n    }\r\n}","import React,{Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\r\nimport {setArticleFilter} from \"../actions/article\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\nimport {FacebookIcon, FacebookShareButton, TwitterIcon, TwitterShareButton, LinkedinIcon, LinkedinShareButton} from \"react-share\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {months} from \"../utils\";\r\n\r\nclass SimpleArticle extends Component{\r\n    constructor(){\r\n        super();\r\n\r\n        this.state={\r\n            text: \"\",\r\n        };\r\n\r\n        this.renderEditor.bind(this);\r\n        this.renderArticle.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.editArticle) {\r\n            if (this.props.layoutData !== null) {\r\n                this.setState({\r\n                    text: this.props.layoutData.text,\r\n                });\r\n            }\r\n            this.props.updateLayoutData(() => {\r\n                let layoutData = {\"text\": this.state.text === \"\" ? this.props.layoutData.text : this.state.text};\r\n                return {layoutData};\r\n            });\r\n        }\r\n    }\r\n\r\n    /*componentDidUpdate(prevProps, prevState){\r\n        if(this.props.editArticle && prevState.text !== this.state.text || prevState.img_url !== this.state.img_url || prevProps.layoutData === null) {\r\n            //console.log(\"text/img updated\");\r\n            this.props.layoutDataCallback({text: this.state.text === \"\" ? this.props.layoutData.text : this.state.text, img_url: this.state.img_url === \"\" ? this.props.layoutData.img_url : this.state.img_url});\r\n        }\r\n    }*/\r\n\r\n    renderArticle(){\r\n        //let article = this.props.editArticle ? this.props.article : this.props.article_info;\r\n        //console.log(article);\r\n        return(\r\n            <Container className=\"bg-white\">\r\n            <div>\r\n                <div style={{margin: this.props.isMobileDevice ? '0' : '2rem', display:'flex', flexDirection:'column', alignItems:'center'}}>\r\n                <div style={{padding: this.props.isMobileDevice ? '0' : '1rem', maxWidth: this.props.isMobileDevice ? 'auto' : '35rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n\r\n                    <a style={{display: 'inline', fontSize: this.props.isMobileDevice ? '2rem' : '3rem', background: 'rgba(0,0,0,0.5)', fontWeight:'Bold'}}>{this.props.editArticle ? this.props.title : this.props.article_info.title}</a>\r\n                {/*<p>{this.props.editArticle ? this.props.lead : this.props.article_info.lead}</p>*/}\r\n\r\n                </div>\r\n                    <Figure style={{flex:1, width: this.props.isMobileDevice ? window.innerWidth+'px' : '40rem'}}>\r\n                        <Figure.Image\r\n                            src={this.props.editArticle ? this.props.titleimg_url : this.props.article_info.titleimg_url} // WILL GENERATE ERRORS\r\n                        />\r\n                    </Figure>\r\n                </div>\r\n                <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '10rem'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '10rem')}}>\r\n                <p style={{fontSize:'0.8rem'}}>\r\n\r\n                    {months[new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getMonth()]}{\" \"}{new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getFullYear()}\r\n\r\n                        {/*, By {this.props.editArticle ? this.props.author : this.props.article_info.author}*/}\r\n                </p>\r\n                {this.props.editArticle ? this.state.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>) :\r\n                    this.props.article_info.layoutData.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>)\r\n                }\r\n                </div>\r\n\r\n                </div>\r\n                <div className=\"bg-light p-4\">\r\n\r\n                    <Row className=\"row-cols-xs-1  mt-1\">\r\n                        {/*<FacebookShareButton className=\"m-2\" url={window.location.href}><span><FacebookIcon size={32}/></span></FacebookShareButton>*/}\r\n                        <TwitterShareButton className=\"m-2\" url={window.location.href}><span><TwitterIcon size={32}/></span></TwitterShareButton>\r\n                        <LinkedinShareButton className=\"m-2\" url={window.location.href}><span><LinkedinIcon size={32}/></span></LinkedinShareButton>\r\n                        <Route render={({history}) => (\r\n                            <div className=\"m-2\">\r\n                                {(this.props.editArticle ? this.props.tags : this.props.article_info.tags).split(\",\").map((tag,index) => (\r\n                                <a key={index} className=\"m-1 bg-secondary\" href=\"#\" onClick={(event) => {\r\n                                        event.preventDefault();\r\n                                        event.stopPropagation();\r\n                                        if(!this.props.editArticle) {\r\n                                            this.props.setArticleFilter(tag);\r\n                                            history.push('/mainpage');\r\n                                            window.scrollTo(0, this.props.offsetTop);\r\n                                        }\r\n                                    }}\r\n                                    style={{color:'white', paddingLeft:\"1rem\", paddingRight:\"1rem\"}}\r\n                                >\r\n                                    {tag}\r\n                                </a>\r\n                                ))}\r\n                            </div>\r\n                        )}/>\r\n                    </Row>\r\n\r\n                    <div style={{paddingLeft:'1rem', paddingRight:'1rem', paddingBottom:'1rem', wordWrap:'break-word'}}>\r\n                        Sources:\r\n                        <br/>\r\n                        <a>\r\n                            {this.props.editArticle ? this.props.sources : this.props.article_info.sources}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderEditor(){\r\n        return(\r\n            <div style={{padding:0,margin:0,width:\"100%\"}}>\r\n                <InputGroup style={{height:\"15rem\"}}>\r\n                    <InputGroup.Prepend>\r\n                    <InputGroup.Text>Article text</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        onChange={(event) => this.setState({text:event.target.value})}\r\n                        as=\"textarea\"\r\n                        aria-label=\"Paragraph\"\r\n                        defaultValue={this.props.layoutData.text}\r\n                    />\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return(\r\n        <div>\r\n        {this.props.editArticle &&\r\n            this.renderEditor()\r\n        }\r\n        {this.props.showArticle &&\r\n            this.renderArticle()\r\n        }\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        article_info: article.article_info,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    setArticleFilter,\r\n})(SimpleArticle);","import React,{Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport ToggleButton from \"react-bootstrap/ToggleButton\";\r\nimport {setArticleFilter} from \"../actions/article\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\nimport {FacebookIcon, FacebookShareButton, TwitterIcon, TwitterShareButton, LinkedinIcon, LinkedinShareButton} from \"react-share\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {months} from \"../utils\";\r\n\r\nclass CustomArticle extends Component{\r\n    constructor(){\r\n        super();\r\n\r\n        this.state={\r\n            //paragraphs: 0,\r\n            text: \"\",\r\n            date:new Date(),\r\n            layoutComponents: [],\r\n            images: 0,\r\n            paragraphs: 0,\r\n        };\r\n\r\n        this.renderEditor.bind(this);\r\n        this.renderArticle.bind(this);\r\n        this.getNewParagraph.bind(this);\r\n        this.getNewImage.bind(this);\r\n        this.getNewPoll.bind(this);\r\n        this.updateComponentData.bind(this);\r\n        this.moveComponent.bind(this);\r\n    }\r\n\r\n    /*componentDidUpdate(prevProps, prevState, snapShot){\r\n        if(this.props.updateLayoutData){\r\n            //console.log(\"text/img updated\");\r\n            console.log(\"UPD\");\r\n            this.setState({ updateFlag: false});\r\n            let data = [];\r\n            this.state.layoutComponents.forEach(component => {\r\n                if(component.type===\"img\"){\r\n                    data.push({\"img_url\":component.value});\r\n                } else if(component.type === \"paragraph\"){\r\n                    data.push({\"paragraph\":component.value});\r\n                }\r\n                // TODO\r\n            });\r\n            this.props.layoutDataCallback(data);\r\n        }\r\n    }*/\r\n\r\n    componentDidMount(){\r\n\r\n        if (this.props.layoutData !== null) {\r\n            let loadData = [];\r\n            this.props.layoutData.forEach((component, idx) => {\r\n                loadData.push({type: component.type, key: idx, value: component.value});\r\n            });\r\n            this.setState({\r\n                layoutComponents: loadData,\r\n            });\r\n            console.log(this.props.layoutData)\r\n        }\r\n        if(this.props.editArticle) {\r\n            this.props.updateLayoutData(() => {\r\n                let layoutData = [];\r\n                this.state.layoutComponents.forEach(component => {\r\n                    if (component.type === \"img_url\") {\r\n                        layoutData.push({\"type\": \"img_url\", \"value\": component.value});\r\n                    } else if (component.type === \"paragraph\") {\r\n                        layoutData.push({\"type\": \"paragraph\", \"value\": component.value});\r\n                    }\r\n                    // TODO\r\n                });\r\n                return {layoutData};\r\n            });\r\n        }\r\n    }\r\n\r\n    renderArticle(){\r\n        //let article = this.props.editArticle ? this.props.article : this.props.article_info;\r\n        //console.log(article);\r\n        return(\r\n            <Container className=\"bg-white\">\r\n            <div>\r\n                <div style={{margin: this.props.isMobileDevice ? '0' : '2rem', display:'flex', flexDirection:'column', alignItems:'center'}}>\r\n                <div style={{padding: this.props.isMobileDevice ? '0' : '1rem', maxWidth: this.props.isMobileDevice ? 'auto' : '35rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n\r\n                    <a style={{display: 'inline', fontSize: this.props.isMobileDevice ? '2rem' : '3rem', background: 'rgba(0,0,0,0.5)', fontWeight:'Bold'}}>{this.props.editArticle ? this.props.title : this.props.article_info.title}</a>\r\n                {/*<p>{this.props.editArticle ? this.props.lead : this.props.article_info.lead}</p>*/}\r\n\r\n                </div>\r\n                    <Figure style={{flex:1, width: this.props.isMobileDevice ? window.innerWidth+'px' : '40rem'}}>\r\n                        <Figure.Image\r\n                            src={this.props.editArticle ? this.props.titleimg_url : this.props.article_info.titleimg_url} // WILL GENERATE ERRORS\r\n                        />\r\n                    </Figure>\r\n                </div>\r\n\r\n                <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '10rem'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '10rem')}}>\r\n                    <p style={{fontSize:'0.8rem'}}>\r\n\r\n                        {months[new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getMonth()]}{\" \"}{new Date(this.props.editArticle ? this.props.date : this.props.article_info.date).getFullYear()}\r\n\r\n                            {/*, By {this.props.editArticle ? this.props.author : this.props.article_info.author}*/}\r\n                    </p>\r\n                </div>\r\n                {/*this.props.editArticle ? this.props.layoutData.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>) :\r\n                    this.props.article_info.text.split ('\\n').map ((item, i) => <p key={i}>{item}</p>)\r\n                */}\r\n                {this.state.layoutComponents.map((component,idx) => (\r\n                    <div key={idx}>\r\n                        {component.type === \"paragraph\" &&\r\n                            <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '10rem'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '10rem')}}>\r\n                                {component.value.split('\\n').map ((item, i) => <p key={i}>{item}</p>)}\r\n                            </div>\r\n                        }\r\n                        {component.type === \"img_url\" &&\r\n                            <div style={{display:'flex', alignItems:'center', justifyContent:'center'}}>\r\n                                <Figure style={{width: this.props.isMobileDevice ? window.innerWidth+'px' : '40rem'}}>\r\n                                    <Figure.Image\r\n                                        src={component.value} // WILL GENERATE ERRORS\r\n                                    />\r\n                                </Figure>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                ))}\r\n\r\n\r\n            </div>\r\n\r\n\r\n                <div className=\"bg-light p-4\">\r\n\r\n                    <Row className=\"row-cols-xs-1  mt-1\">\r\n                        {/*<FacebookShareButton className=\"m-2\" url={window.location.href}><span><FacebookIcon size={32}/></span></FacebookShareButton>*/}\r\n                        <TwitterShareButton className=\"m-2\" url={window.location.href}><span><TwitterIcon size={32}/></span></TwitterShareButton>\r\n                        <LinkedinShareButton className=\"m-2\" url={window.location.href}><span><LinkedinIcon size={32}/></span></LinkedinShareButton>\r\n                        <Route render={({history}) => (\r\n                            <div className=\"m-2\">\r\n                                {(this.props.editArticle ? this.props.tags : this.props.article_info.tags).split(\",\").map((tag,index) => (\r\n                                <a key={index} className=\"m-1 bg-secondary\" href=\"#\" onClick={(event) => {\r\n                                        event.preventDefault();\r\n                                        event.stopPropagation();\r\n                                        if(!this.props.editArticle) {\r\n                                            this.props.setArticleFilter(tag);\r\n                                            history.push('/mainpage');\r\n                                            window.scrollTo(0, this.props.offsetTop);\r\n                                        }\r\n                                    }}\r\n                                    style={{color:'white', paddingLeft:\"1rem\", paddingRight:\"1rem\"}}\r\n                                >\r\n                                    {tag}\r\n                                </a>\r\n                                ))}\r\n                            </div>\r\n                        )}/>\r\n                    </Row>\r\n\r\n                    <div style={{paddingLeft:'1rem', paddingRight:'1rem', paddingBottom:'1rem', wordWrap:'break-word'}}>\r\n                        Sources:\r\n                        <br/>\r\n                        <a>\r\n                            {this.props.editArticle ? this.props.sources : this.props.article_info.sources}\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    updateComponentData(key,type,value){\r\n\r\n        let components = this.state.layoutComponents;\r\n        this.state.layoutComponents.forEach((component) => {\r\n            if(component.key === key && component.type === type) {\r\n                component.value = value;\r\n                components[this.state.layoutComponents.indexOf(component)] = component;\r\n\r\n                this.setState({\r\n                    layoutComponents: components,\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    moveComponent(arr, old_index, new_index) {\r\n        arr.splice(new_index, 0, arr.splice(old_index, 1)[0]);\r\n        return arr; // for testing\r\n    };\r\n\r\n    getNewParagraph(key, value){\r\n        return(\r\n            <Row key={key} className=\"mb-3\">\r\n                <Col md={9} xs={9}>\r\n                <InputGroup>\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text>Paragraph</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        as=\"textarea\"\r\n                        aria-label=\"Paragraph\"\r\n                        onChange={(event) => this.updateComponentData(key, \"paragraph\", event.target.value)}\r\n                        defaultValue={value}/>\r\n                </InputGroup>\r\n                </Col>\r\n                <Col md={1} xs={1}>\r\n\r\n                    <Row>\r\n                       <Button className=\"btn-secondary\" size=\"sm\" onClick={() => {\r\n                            // MOVE UP\r\n                           let idx = this.state.layoutComponents.findIndex(item => (item.key === key && item.type === \"paragraph\"));\r\n                           if(idx>=0) {\r\n                               let components = this.state.layoutComponents;\r\n                               components = this.moveComponent(components, idx, idx - 1);\r\n                               this.setState({\r\n                                   layoutComponents: components,\r\n                               });\r\n                           }\r\n                        }}\r\n                        >&#x25B2;</Button>\r\n                    </Row>\r\n                    <Row>\r\n                        <Button className=\"btn-secondary mt-1\" size=\"sm\" onClick={() => {\r\n                            // MOVE DOWN\r\n                           let idx = this.state.layoutComponents.findIndex(item => (item.key === key && item.type === \"paragraph\"));\r\n                           if(idx<this.state.layoutComponents.length-1) {\r\n                               let components = this.state.layoutComponents;\r\n                               components = this.moveComponent(components, idx, idx + 1);\r\n                               this.setState({\r\n                                   layoutComponents: components,\r\n                               });\r\n                           }\r\n                        }}\r\n                        >&#x25BC;</Button>\r\n                    </Row>\r\n                </Col>\r\n                <Col md={1} xs={1}>\r\n                   <Button className=\"btn-danger\" size=\"sm\" onClick={() => {\r\n                       let components = this.state.layoutComponents;\r\n                       components = components.filter(function(value, index, arr){ return !(value.type === \"paragraph\" && value.key === key)});\r\n                       this.setState({\r\n                            layoutComponents: components,\r\n                       })\r\n                   }} >&#10060;</Button>\r\n\r\n                </Col>\r\n\r\n            </Row>\r\n        );\r\n    }\r\n\r\n    getNewImage(key, value){\r\n        return(\r\n            <Row key={key} className=\"mb-3\">\r\n                <Col xs={9}>\r\n                <InputGroup>\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Image url:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        onChange={(event) => this.updateComponentData(key, \"img_url\", event.target.value)}\r\n                        placeholder=\"image url\"\r\n                        aria-label=\"image url\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue={value}\r\n                    />\r\n                </InputGroup>\r\n                </Col>\r\n                <Col md={1} xs={1}>\r\n                    <Row>\r\n                       <Button className=\"btn-secondary\" size=\"sm\" onClick={() => {\r\n                            // MOVE UP\r\n                           let idx = this.state.layoutComponents.findIndex(item => (item.key === key && item.type === \"img_url\"));\r\n                           if(idx>=0) {\r\n                               let components = this.state.layoutComponents;\r\n                               components = this.moveComponent(components, idx, idx - 1);\r\n                               this.setState({\r\n                                   layoutComponents: components,\r\n                               });\r\n                           }\r\n                        }}\r\n                        >&#x25B2;</Button>\r\n                    </Row>\r\n                    <Row>\r\n                        <Button className=\"btn-secondary mt-1\" size=\"sm\" onClick={() => {\r\n                            // MOVE DOWN\r\n                           let idx = this.state.layoutComponents.findIndex(item => (item.key === key && item.type === \"img_url\"));\r\n                           if(idx<this.state.layoutComponents.length-1) {\r\n                               let components = this.state.layoutComponents;\r\n                               components = this.moveComponent(components, idx, idx + 1);\r\n                               this.setState({\r\n                                   layoutComponents: components,\r\n                               });\r\n                           }\r\n                        }}\r\n                        >&#x25BC;</Button>\r\n                    </Row>\r\n                </Col>\r\n                <Col md={1} xs={1}>\r\n                   <Button className=\"btn-danger\" size=\"sm\" onClick={() => {\r\n                       let components = this.state.layoutComponents;\r\n                       components = components.filter(function(value, index, arr){ return !(value.type === \"img_url\" && value.key === key)});\r\n                       this.setState({\r\n                            layoutComponents: components,\r\n                       })\r\n                   }} >&#10060;</Button>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    }\r\n\r\n    getNewPoll(){\r\n        return(\r\n            <div></div>\r\n        );\r\n    }\r\n\r\n    renderEditor(){\r\n        return(\r\n            <div style={{padding:0,margin:0,width:\"100%\"}}>\r\n\r\n                <Button size=\"sm\" className=\"btn-secondary mt-2 mb-2 mr-2\" onClick={() => {\r\n                    let components = this.state.layoutComponents;\r\n                    let paragraphKey = this.state.paragraphs+1;\r\n                    components.push({type:\"paragraph\", key:paragraphKey, value:\"\"});\r\n                    this.setState({\r\n                        paragraphs: paragraphKey,\r\n                        layoutComponents: components,\r\n                    })\r\n                }} >Add Paragraph</Button>\r\n\r\n                <Button size=\"sm\" className=\"btn-secondary m-2\" onClick={() => {\r\n                    let components = this.state.layoutComponents;\r\n                    let imgkey = this.state.images+1;\r\n                    components.push({type:\"img_url\",key:imgkey, value:\"\"});\r\n                    this.setState({\r\n                        images: imgkey,\r\n                        layoutComponents: components,\r\n                    });\r\n                }} >Add Image</Button>\r\n\r\n                <Button disabled={true} size=\"sm\" className=\"m-2 btn-secondary\" onClick={() => console.log(\"Create Poll\")} >Create Poll</Button>\r\n\r\n                {/*hthis.renderParagraphs()*/}\r\n                {this.state.layoutComponents.map((component,idx) => (\r\n                    <div key={idx}>\r\n                        {component.type === \"img_url\" ?\r\n                        this.getNewImage(component.key,component.value)\r\n                            : component.type === \"paragraph\" ?\r\n                        this.getNewParagraph(component.key,component.value)\r\n                            : component.type === \"poll\" ?\r\n                        this.getNewPoll(component.key,component.value)\r\n                            :\r\n                        <a>undefined</a>\r\n                        }\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render(){\r\n        return(\r\n        <div>\r\n        {this.props.editArticle &&\r\n            this.renderEditor()\r\n        }\r\n        {this.props.showArticle &&\r\n            this.renderArticle()\r\n        }\r\n        </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        article_info: article.article_info,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    setArticleFilter,\r\n})(CustomArticle);","import {Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport React from \"react\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport {loginUser, logoutUser} from \"../actions/authentication\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getArticles, gotoArticle, setArticleFilter, getArticlesByKeyWord} from '../actions/article';\r\nimport {\r\n    Link\r\n} from \"react-router-dom\";\r\nimport {FacebookShareButton, TwitterShareButton, FacebookIcon, TwitterIcon} from 'react-share';\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\nimport {months} from \"../utils\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\n\r\nclass MainPage extends Component {\r\n\r\n    constructor(){\r\n        super();\r\n\r\n        this.mainFigureNode = React.createRef();\r\n\r\n        this.searchByTag.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        if(this.props.articles.length===0) {\r\n            this.props.getArticles([],\"\");\r\n        }\r\n    }\r\n\r\n    renderArticle(article){\r\n        this.props.gotoArticle(article)\r\n    }\r\n\r\n    searchByTag(event, tag){\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        if(this.props.articlesAvailable){\r\n            this.props.setArticleFilter(tag);\r\n            this.props.getArticlesByKeyWord(this.props.articles.map(a => a._id),tag);\r\n        } else { // No need for db query since client has all articles - filter articles locally\r\n            this.props.setArticleFilter(tag);\r\n        }\r\n        window.scrollTo(0,this.props.offsetTop);\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <Container style={{margin: this.props.isMobileDevice ? 0 : 'auto', padding: this.props.isMobileDevice ? 0 : 'auto'}}>\r\n\r\n                {this.props.articles.sort((a,b) => new Date(b.date) - new Date(a.date)).map((article,index) => (\r\n                    <div key={index}>\r\n                        {(this.props.filter === \"\" || article.title.toLowerCase().includes(this.props.filter.toLowerCase()) || article.tags.toLowerCase().includes(this.props.filter.toLowerCase())) &&\r\n\r\n                                    <div>\r\n                                        {!this.props.isMobileDevice && index === 0 && this.props.filter === \"\" ?\r\n                                            <div className=\"mt-4\" style={{\r\n                                                width: '100%',\r\n                                                border: 'none',\r\n                                                overflow:'hidden'\r\n                                            }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                <div className=\"row\">\r\n                                                    <div ref = {ref => this.mainFigureNode = ref} className=\"col-md-6\">\r\n                                                    <Route render={({history}) => (\r\n                                                        <Figure className=\"img-fluid\" style={{\r\n                                                                height: 'auto',\r\n                                                                maxWidth: '40rem',\r\n                                                                objectFit: 'cover'\r\n                                                            }}>\r\n                                                            <Figure.Image onClick={() => {\r\n                                                                history.push('/article/' + article._id);\r\n                                                                this.renderArticle(article);\r\n                                                                window.scrollTo(0,this.props.offsetTop);\r\n                                                            }} src={article.titleimg_url}/>\r\n                                                        </Figure>\r\n                                                    )}/>\r\n                                                    </div>\r\n                                                    <Route render={({history}) => (\r\n                                                        <div style={{maxWidth:'25rem', marginLeft:'2rem', marginTop:'1rem', height:'auto', fontSize:'2rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n                                                            <a href=\"#\"\r\n                                                               onClick={(event) => {\r\n                                                                   event.preventDefault();\r\n                                                                   event.stopPropagation();\r\n                                                                   history.push('/article/' + article._id);\r\n                                                                    this.renderArticle(article);\r\n                                                                    window.scrollTo(0,this.props.offsetTop);\r\n                                                                }}\r\n                                                               className=\"text-left\" style={{\r\n                                                                fontSize:'2.2rem',\r\n                                                                lineHeight:'1.8rem',\r\n                                                                color:'white',\r\n                                                                display: 'inline',\r\n                                                                background: 'rgba(0,0,0,0.5)',\r\n                                                                fontWeight: 'Bold',\r\n                                                            }}>{article.title}\r\n                                                            </a>\r\n                                                        </div>\r\n                                                    )}/>\r\n                                                    <div className=\"col-md-5 m-3\">\r\n                                                        <div className=\"row justify-content-start\">\r\n                                                            <a className=\"mr-1\">\r\n                                                                {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                            </a>\r\n                                                            <div>\r\n                                                                {article.tags.split(\",\").map((tag, index) => (\r\n                                                                    <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                       href=\"#\" onClick={(event) => {\r\n                                                                        this.searchByTag(event,tag);\r\n                                                                    }}\r\n                                                                       style={{\r\n                                                                           margin: 'auto',\r\n                                                                           color: 'white',\r\n                                                                           paddingLeft: \"1rem\",\r\n                                                                           paddingRight: \"1rem\"\r\n                                                                       }}\r\n                                                                    >\r\n                                                                        {tag}\r\n                                                                    </a>\r\n                                                                ))}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                        <Card.Text className=\"row mt-2\" style={{\r\n                                                            fontSize: '1.2rem',\r\n                                                            fontFamily: 'Helvetica'\r\n                                                        }}>{article.lead}</Card.Text>\r\n                                                        <div className=\"row\">\r\n                                                            <Link to={\"/article/\" + article._id} style={{color:'#15632a', outline:'0'}}\r\n                                                                  onClick={() => {\r\n                                                                      this.renderArticle(article);\r\n                                                                      window.scrollTo(0,this.props.offsetTop);\r\n                                                                  }}>Read\r\n                                                                more</Link>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n\r\n\r\n                                            :\r\n                                            <div>\r\n                                            {this.props.isMobileDevice ?\r\n                                                <Card className=\"mt-4 bg-light\" style={{\r\n                                                    width: window.innerWidth + 'px',\r\n                                                    //left: this.props.isMobileDevice ? 0 : '5%',\r\n                                                    border: 'none',\r\n                                                    overflow:'hidden'\r\n                                                }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                    <Card.Title className=\"col m-1\" style={{\r\n                                                        fontWeight: 'Bold',\r\n                                                        fontSize: \"1.6rem\",\r\n                                                        fontFamily: 'Helvetica'\r\n                                                    }}>{article.title}</Card.Title>\r\n\r\n                                                    <Card.Body className=\"row\">\r\n                                                        <Route render={({history}) => (\r\n                                                            <Card.Img onClick={() => {\r\n                                                                history.push('/article/' + article._id);\r\n                                                                this.renderArticle(article);\r\n                                                                window.scrollTo(0,this.props.offsetTop);\r\n                                                            }} className=\"img-fluid col-md-4\" style={{\r\n                                                                maxHeight: 'auto',\r\n                                                                width: window.innerWidth + 'px',\r\n                                                                objectFit: 'cover'\r\n                                                            }} src={article.titleimg_url}/>\r\n                                                        )}/>\r\n                                                        <div className=\"col-md-7 m-3\">\r\n                                                            <div className=\"row justify-content-start\">\r\n                                                                <a className=\"mr-1\">\r\n                                                                    {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                                </a>\r\n                                                                <div>\r\n                                                                    {article.tags.split(\",\").map((tag, index) => (\r\n                                                                        <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                           href=\"#\" onClick={(event) => {\r\n                                                                                this.searchByTag(event,tag);\r\n                                                                        }}\r\n                                                                           style={{\r\n                                                                               margin: 'auto',\r\n                                                                               color: 'white',\r\n                                                                               paddingLeft: \"1rem\",\r\n                                                                               paddingRight: \"1rem\"\r\n                                                                           }}\r\n                                                                        >\r\n                                                                            {tag}\r\n                                                                        </a>\r\n                                                                    ))}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <Card.Text className=\"row mt-2\" style={{\r\n                                                                fontSize: '1.2rem',\r\n                                                                fontFamily: 'Helvetica'\r\n                                                            }}>{article.lead}</Card.Text>\r\n                                                            <div className=\"row\">\r\n                                                                <Link to={\"/article/\" + article._id} style={{color:'#15632a', outline:'0'}}\r\n                                                                      onClick={() => {\r\n                                                                          this.renderArticle(article);\r\n                                                                          window.scrollTo(0,this.props.offsetTop);\r\n                                                                      }}>Read\r\n                                                                    more</Link>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </Card.Body>\r\n                                                </Card>\r\n\r\n                                                :\r\n\r\n                                                <div className=\"mt-4\" style={{\r\n                                                width: '90%',\r\n                                                //left: this.props.isMobileDevice ? 0 : '5%',\r\n                                                border: 'none',\r\n                                                overflow:'hidden'\r\n                                            }} /*className={index===0 ? \"mt-4\" : \"mt-4\"}*/ /*style={{height:index===0 ? '' : '10rem', display: 'flex', flexDirection: 'column'}}*/>\r\n\r\n                                                {/*<Card.Title className=\"col m-1\" style={{\r\n                                                    fontWeight: 'Bold',\r\n                                                    fontSize: \"1.6rem\",\r\n                                                    fontFamily: 'Helvetica'\r\n                                                }}>{article.title}</Card.Title>\r\n*/}\r\n                                                <div className=\"row\">\r\n                                                    <div className=\"col-md-4\">\r\n                                                        <Route render={({history}) => (\r\n                                                            <Figure\r\n                                                                className=\"img-fluid\"\r\n                                                                style={{\r\n                                                                    maxHeight: '20rem',\r\n                                                                    width: 'auto',\r\n                                                                    objectFit: 'cover'\r\n                                                                }}\r\n                                                            >\r\n                                                                <Figure.Image onClick={() => {\r\n                                                                    history.push('/article/' + article._id);\r\n                                                                    this.renderArticle(article);\r\n                                                                    window.scrollTo(0,this.props.offsetTop);\r\n                                                                    }}\r\n\r\n                                                                    src={article.titleimg_url}/>\r\n\r\n                                                            </Figure>\r\n                                                        )}/>\r\n                                                    </div>\r\n                                                    <div className=\"col-md-8\">\r\n                                                        <div className=\"row\">\r\n                                                            <Route render={({history}) => (\r\n                                                                <a href=\"#\"\r\n                                                                   onClick={(event) => {\r\n                                                                       event.preventDefault();\r\n                                                                       event.stopPropagation();\r\n                                                                       history.push('/article/' + article._id);\r\n                                                                       this.renderArticle(article);\r\n                                                                       window.scrollTo(0, this.props.offsetTop);\r\n                                                                   }}\r\n                                                                   style={{\r\n                                                                       fontSize: '2rem',\r\n                                                                       color: 'black',\r\n                                                                       fontFamily: 'Helvetica',\r\n                                                                       fontWeight: 'Bold'\r\n                                                                   }}\r\n                                                                >\r\n                                                                    {article.title}\r\n                                                                </a>\r\n                                                            )}/>\r\n                                                        </div>\r\n                                                        <div className=\"row\">\r\n                                                            <a className=\"mr-1\">\r\n                                                                {months[new Date(article.date).getMonth()]}{\" \"}{new Date(article.date).getFullYear()}\r\n                                                            </a>\r\n                                                            <div>\r\n                                                                {article.tags.split(\",\").map((tag, index) => (\r\n                                                                    <a key={index} className=\"ml-1 mr-1 bg-secondary\"\r\n                                                                       href=\"#\" onClick={(event) => {\r\n                                                                            this.searchByTag(event,tag);\r\n                                                                    }}\r\n                                                                       style={{\r\n                                                                           margin: 'auto',\r\n                                                                           color: 'white',\r\n                                                                           paddingLeft: \"1rem\",\r\n                                                                           paddingRight: \"1rem\"\r\n                                                                       }}\r\n                                                                    >\r\n                                                                        {tag}\r\n                                                                    </a>\r\n                                                                ))}\r\n                                                            </div>\r\n\r\n                                                        </div>\r\n\r\n                                                        <div className=\"row\">\r\n                                                            <Link to={\"/article/\" + article._id} style={{color:'#15632a', outline:'0'}}\r\n                                                                  onClick={() => {\r\n                                                                      this.renderArticle(article);\r\n                                                                      window.scrollTo(0,this.props.offsetTop);\r\n                                                                  }}>Read more\r\n                                                            </Link>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            }\r\n                                            </div>\r\n\r\n                                        }\r\n                                    </div>\r\n\r\n                        }\r\n                    </div>\r\n\r\n                ))}\r\n\r\n                {this.props.loading &&\r\n                    <div className=\"text-center m-5\">\r\n                        <Spinner animation=\"border\" variant=\"success\"/>\r\n                    </div>\r\n                }\r\n\r\n                {this.props.filter === \"\" && this.props.articlesAvailable && !this.props.loading &&\r\n                    <Container style={{marginTop:'1rem', textAlign: this.props.isMobileDevice ? 'center' : 'left'}}>\r\n                        <Button style={{background:'#15632a', fontWeight:'Bold', outline:'0'}} className=\"rounded-8 btn-sm btn-success\"\r\n                                onClick={() => {\r\n                                    this.props.getArticles(this.props.articles.map(a => a._id), this.props.checkpoint);\r\n                                }}\r\n                        >Show more</Button>\r\n                    </Container>\r\n                }\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        articles: article.articles,\r\n        checkpoint: article.next_checkpoint,\r\n        loading: article.loading_articles,\r\n        filter: article.filter,\r\n        articlesAvailable: article.articles_available,\r\n        isAuthenticated: auth.isAuthenticated,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getArticles,\r\n    gotoArticle,\r\n    setArticleFilter,\r\n    getArticlesByKeyWord\r\n})(MainPage);","export const LOGIN_REQUEST = 'login_request';\r\nexport const LOGIN_SUCCESS = 'login_success';\r\nexport const LOGIN_FAILURE = 'login_failure';\r\n\r\nexport const LOGOUT_SUCCESS = 'logout_success';\r\nexport const LOGOUT_REQUEST = 'logout_request';\r\n\r\nexport const ARTICLES_RECEIVED = 'articles_received';\r\nexport const ARTICLE_INFO = 'article_info';\r\nexport const ARTICLE_FILTER = 'article_filter';\r\nexport const LOADING_ARTICLES = 'loading_articles';\r\nexport const ARTICLES_AVAILABLE = 'articles_available';\r\nexport const MANAGE_ARTICLES_RECEIVED = 'manage_articles_received';\r\nexport const NEXT_CHECKPOINT = 'next_checkpoint';\r\n\r\nexport const DEVICE_TYPE = 'device_type';\r\nexport const OFFSET_TOP = 'offset_top';","import {DEVICE_TYPE, OFFSET_TOP} from \"../actions/types\";\r\n\r\nfunction setMobile(isMobile) {\r\n  return {\r\n    type: DEVICE_TYPE,\r\n    isMobileDevice:isMobile,\r\n  }\r\n}\r\n\r\nfunction setOffset(offset){\r\n    return {\r\n        type: OFFSET_TOP,\r\n        offset_top: offset,\r\n    }\r\n}\r\n\r\nexport function setMobileDevice(isMobile){\r\n     return (dispatch) => {\r\n         dispatch(setMobile(isMobile));\r\n     }\r\n}\r\n\r\nexport function setOffsetTop(offset){\r\n    return (dispatch) => {\r\n        dispatch(setOffset(offset));\r\n    }\r\n}","import React, {Component} from \"react\";\r\nimport {\r\n    HashRouter,\r\n    Switch,\r\n    Redirect,\r\n    Route,\r\n    Link,\r\n    useHistory,\r\n} from \"react-router-dom\";\r\nimport MainPage from \"./components/MainPage\";\r\nimport ArticlePage from \"./components/ArticlePage\";\r\nimport ManagementPage from \"./components/ManagementPage\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {loginUser, logoutUser} from \"./actions/authentication\";\r\nimport {setArticleFilter, getArticlesByKeyWord} from \"./actions/article\";\r\nimport {setMobileDevice, setOffsetTop} from \"./actions/configuration\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport CreateArticlePage from \"./components/CreateArticlePage\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport {Row,Col} from \"react-bootstrap\";\r\nimport Collapse from \"react-bootstrap/Collapse\";\r\nimport Figure from \"react-bootstrap/Figure\";\r\n\r\n\r\nclass Routes extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = ({\r\n            search: false,\r\n            showLogin: false,\r\n            navExpanded: false,\r\n        });\r\n\r\n        this.navbarRef = React.createRef();\r\n        this.searchRef = React.createRef();\r\n\r\n        this.onlogin.bind(this);\r\n        this.onlogout.bind(this);\r\n        this.setNavExpanded.bind(this);\r\n        this.closeNav.bind(this);\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.setOffsetTop(this.navbarRef.current.offsetTop);\r\n        this.props.setMobileDevice(window.innerWidth<500);\r\n    }\r\n\r\n    setNavExpanded() {\r\n        this.setState({ navExpanded: true});\r\n    }\r\n\r\n    closeNav() {\r\n        this.setState({ navExpanded: false });\r\n    }\r\n\r\n    onlogin(usr,pw){\r\n        console.log(\"login...\");\r\n        let user={\r\n            name:usr,\r\n            password:pw\r\n        }\r\n        this.props.loginUser(user)\r\n    }\r\n\r\n    onlogout(){\r\n        console.log(\"logout...\");\r\n        this.props.logoutUser();\r\n    }\r\n\r\n    handleSubmit(event){\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        if(this.props.isAuthenticated){\r\n            this.onlogout();\r\n        }else{\r\n            this.onlogin(event.currentTarget.elements[0].value,event.currentTarget.elements[1].value)\r\n        }\r\n    }\r\n\r\n    renderAbout(){\r\n\r\n        return(\r\n            <Container className=\"bg-white pt-2\">\r\n            <div>\r\n                <div style={{display:'flex', flexDirection:'column', alignItems:'center'}}>\r\n                    <div style={{marginTop: this.props.isMobileDevice ? 0 : '2rem', height:'auto', fontSize:'2rem', fontFamily:'Helvetica', color: 'white', position: 'absolute'}}>\r\n                        <a style={{fontSize:'3rem', display: 'inline', background: 'rgba(0,0,0,0.5)', fontWeight:'Bold'}}>About <br/> Finland China News</a>\r\n                    </div>\r\n\r\n                    <Figure style={{margin: this.props.isMobileDevice ? 0 : '2rem', flex:1,height:'auto', width: this.props.isMobileDevice ? window.innerWidth+'px' : '50%'}}>\r\n                        <Figure.Image\r\n                        src={this.props.isMobileDevice ? \"https://defaultwebresources.blob.core.windows.net/resources/china-4456833_640.jpg\" : \"https://defaultwebresources.blob.core.windows.net/resources/china-4456833_1920.jpg\"}\r\n                        />\r\n                    </Figure>\r\n                </div>\r\n                <div style={{fontfamily:'Helvetica', marginLeft: (this.props.isMobileDevice ? window.innerWidth*0.0005+'rem' : '25%'), marginRight: (this.props.isMobileDevice ? eval(window.innerWidth*0.0005)+'rem' : '25%')}}>\r\n                    Finland China News was established with the goal to build and expand the Finland China business community. The aim for this platform is to help companies and people make better decisions through access to highly relevant information.\r\n                    <br/>\r\n                    <br/>\r\n                    Today, there are around 400 Finnish companies in China, and around 100 Chinese companies in Finland. Our vision is to become the leading knowledge platform for accessing information that affect the companies, investors and people in this market.\r\n                </div>\r\n            </div>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderContactCard(){\r\n        return(\r\n            <Container className=\"fluid pt-5\" style={{maxWidth:\"50rem\",border:\"none\"}}>\r\n                <Card>\r\n                    <Card.Header className=\"text-center\" style={{fontFamily:'Helvetica', fontSize:\"1.5rem\"}}>Contact Information</Card.Header>\r\n                    <Row>\r\n                    <Col style={{maxWidth:\"10%\"}}>\r\n                            <div className=\"bg-success\" style={{height:\"100%\",width:\"1rem\"}}></div>\r\n                    </Col>\r\n                        <Col className=\"col-xs-16 col-sm-16 col-md-16\">\r\n                        <Card.Body>\r\n                            <Card.Text style={{fontFamily:'Verdana'}}>\r\n                                Want to get involved, or suggest a good piece of news? We would love to hear your feedback.\r\n                                <br/>\r\n                                <br/>\r\n                                <a href=\"mailto:finlandchinanews@outlook.com\">finlandchinanews@outlook.com</a>\r\n                            </Card.Text>\r\n                        </Card.Body>\r\n                    </Col>\r\n                    </Row>\r\n                </Card>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    renderContact(){\r\n        return(\r\n            <Container className=\"fluid pt-5 text-center\">\r\n                <a style={{fontSize:'2.5rem', fontFamily:'Helvetica', fontWeight:'Bold'}}>Contact</a>\r\n                <p className=\"p-3\" style={{fontFamily:'Helvetica', fontSize:'1.2rem'}}>\r\n                    Want to get involved, or suggest a good piece of news?\r\n                    <br/>\r\n                    We would love to hear your feedback.\r\n                    <br/>\r\n                </p>\r\n                <a style={{fontFamily:'Helvetica', color:'#15632a', fontSize:'1.3rem'}} href=\"mailto:finlandchinanews@outlook.com\">finlandchinanews@outlook.com</a>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <HashRouter basename=\"/\">\r\n                <div className=\"logo\" style={{textAlign:\"center\", backgroundPosition:\"center\", height:\"15rem\", backgroundImage: this.props.isMobileDevice ? `url(https://defaultwebresources.blob.core.windows.net/resources/road-4564817_640.jpg)` : `url(https://defaultwebresources.blob.core.windows.net/resources/road-4564817_1920.jpg)`}}>\r\n                    <h1 style={{paddingTop:\"3rem\", textAlign: \"center\", fontFamily: \"Tw Cen MT\", color:\"white\", fontSize:'3rem'}}>FINLAND CHINA NEWS<p>芬 中 新 闻​</p></h1>\r\n                </div>\r\n                <Navbar\r\n                    ref={this.navbarRef}\r\n                    onClick={() => {\r\n                        if(this.state.search){\r\n                            this.setState({\r\n                                search:false\r\n                            });\r\n                    }\r\n                    this.props.setArticleFilter(\"\");\r\n                    this.searchRef.value = \"\";\r\n                    }}\r\n                    collapseOnSelect\r\n                    className=\"bg-light\"\r\n                    expand=\"lg\"\r\n                    onToggle={() => {\r\n                        this.setState({\r\n                                navExpanded:!this.state.navExpanded,\r\n                            });\r\n                    }}\r\n                    expanded={this.state.navExpanded}\r\n                    id=\"responsive-navbar-nav\"\r\n                    >\r\n                    <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n                    <Navbar.Collapse>\r\n                        <Nav className=\"justify-content-center\" style={{ width: \"100%\"}}>\r\n                            <Nav.Item onClick={() => this.setState({navExpanded:false})}>\r\n                                <Link to={\"/mainpage\"} className=\"nav-link mr-5 ml-5 text-center\" style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>HOME</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item onClick={() => {\r\n                                window.scrollTo(0, this.props.offsetTop);\r\n                                this.setState({navExpanded:false});\r\n                            }} className=\"mr-5 ml-5 text-center\">\r\n                                <Link className=\"nav-link\" to={\"/about\"} style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>ABOUT</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item  onClick={() => {\r\n                                window.scrollTo(0, this.props.offsetTop);\r\n                                this.setState({navExpanded:false});\r\n                            }} className=\"mr-5 ml-5 text-center\">\r\n                                <Link className=\"nav-link\" to={\"/contact\"} style={{outline:'0',fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>CONTACT</Link>\r\n                            </Nav.Item>\r\n                            <Nav.Item  onClick={() => this.setState({navExpanded:false})} className=\"mr-5 ml-5 text-center\">\r\n                                    <Nav.Link onClick={() => this.setState({search:!this.state.search})} style={{outline:'0', fontFamily:'Tw Cen MT', fontSize:'1.5rem'}}>SEARCH</Nav.Link>\r\n                                </Nav.Item>\r\n                        </Nav>\r\n                    </Navbar.Collapse>\r\n                </Navbar>\r\n\r\n                <Collapse in={this.state.search}>\r\n                    <Container>\r\n                        <div style={{display:'flex', flexDirection:'col'}}>\r\n\r\n                            <Form.Control ref={ref => this.searchRef = ref} style={{outline:'0', boxShadow:'none', borderColor:'green'}} className=\"mt-2 text-center\" placeholder=\"search for article\" onChange={(evt) => {\r\n                                //this.props.setArticleFilter(evt.target.value.toLowerCase());\r\n                            }}/>\r\n                        <Route render={({history}) => (\r\n                        <Button style={{background:'#15632a', outline:'0', fontFamily:'Helvetica'}} className=\"btn-sm btn-success mt-2\"\r\n                            onClick={() => {\r\n                                // Query db with keywords\r\n                                if(this.props.articlesAvailable && this.searchRef.value !== \"\"){\r\n                                    this.props.setArticleFilter(this.searchRef.value.toLowerCase());\r\n                                    this.props.getArticlesByKeyWord(this.props.articles.map(a => a._id),this.searchRef.value.toLowerCase());\r\n                                } else { // No need for db query since client has all articles - filter articles locally\r\n                                    this.props.setArticleFilter(this.searchRef.value.toLowerCase());\r\n                                }\r\n                                if(window.location.hash !== '#/mainpage'){\r\n                                    history.push('/mainpage');\r\n                                }\r\n                            }}\r\n                        >Search</Button>\r\n                            )}/>\r\n                        </div>\r\n                    </Container>\r\n                </Collapse>\r\n\r\n                {this.props.filter !== \"\" && window.location.hash === '#/mainpage' &&\r\n                    <Container style={{display:'flex', flexDirection:'row', marginTop:'1rem'}}>\r\n                            <a style={{color:'#707070', fontFamily:\"Segoe UI Symbol\", fontSize:'1.2rem', textDecoration:'none', flex:0.1, border:'none', background:'transparent'}}\r\n                               href=\"#\"\r\n                                onClick={(event) => {\r\n                                    event.preventDefault();\r\n                                    event.stopPropagation();\r\n                                    this.props.setArticleFilter(\"\");\r\n                                    this.setState({search:false});\r\n                                    this.searchRef.value = \"\";\r\n                                }}\r\n                            >&#10060;</a>\r\n                            <a style={{fontFamily:'Helvetica', marginLeft:'1rem', fontSize:'1.2rem', flex:5}}>Showing articles with keyword '{this.props.filter}':</a>\r\n\r\n                    </Container>\r\n                }\r\n\r\n                <Switch>\r\n                    <Route exact path=\"/\">\r\n                        <Redirect to=\"/mainpage\" />\r\n                    </Route>\r\n                    <Route path=\"/mainpage\">\r\n                        <MainPage/>\r\n                    </Route>\r\n                    <Route path=\"/article\">\r\n                        <ArticlePage/>\r\n                    </Route>\r\n                    <Route path=\"/about\">\r\n                        {this.renderAbout()}\r\n                    </Route>\r\n                    <Route path=\"/contact\">\r\n                        {this.renderContact()}\r\n                    </Route>\r\n                    {this.props.isAuthenticated &&\r\n                    <Route path=\"/management\">\r\n                        <ManagementPage/>\r\n                    </Route>\r\n                    }\r\n                    {this.props.isAuthenticated &&\r\n                    <Route path=\"/create\" render={(props) => <CreateArticlePage {...props}/>}/>\r\n                    }\r\n                </Switch>\r\n\r\n                <div style={{width:\"100%\", height:\"8rem\", textAlign:\"center\", fontFamily:'Helvetica', fontSize:'1rem'}}>\r\n                    <p style={{marginTop:\"5rem\"}}>Finland China News 2020</p>\r\n                </div>\r\n\r\n                <Collapse in={this.state.showLogin}>\r\n                    <Container style={{position:\"relative\"}}>\r\n                    <Form onSubmit={this.handleSubmit.bind(this)} className=\"align-text-bottom\">\r\n                        {!this.props.isAuthenticated &&\r\n                            <Row className=\"justify-content-center row-cols-sm-3\" style={{margin:\"auto\",float:\"none\"}}>\r\n                                <Col className=\"col-sm-2\">\r\n                                    <Form.Control required style={{paddingRight:\"0\", marginRight:\"0\"}} size=\"sm\" placeholder=\"username\"/>\r\n                                </Col>\r\n                                <Col className=\"col-sm-2\">\r\n                                    <Form.Control required size=\"sm\" type=\"password\" placeholder=\"password\"/>\r\n                                </Col>\r\n                                <Col className=\"col-sm-1\">\r\n                                    <Button className=\"btn-secondary\" size=\"sm\" type=\"submit\" >Login</Button>\r\n                                    <a href=\"#\" style={{color:\"red\", fontSize:\"0.7rem\"}}>\r\n                                        {this.props.errorMessage}\r\n                                    </a>\r\n                                </Col>\r\n                            </Row>\r\n                        }\r\n\r\n                        {this.props.isAuthenticated &&\r\n                        <Row className=\"justify-content-center row-cols-sm-2\" style={{margin:\"auto\",float:\"none\",width:\"60%\"}}>\r\n                            <Col className=\"col-sm-2\">\r\n                                <Route render={({history}) => (\r\n                                <Button className=\"btn-secondary\" size=\"sm\" onClick={() => history.push('/')} type=\"submit\" >Logout</Button>\r\n                                    )}/>\r\n                            </Col>\r\n                            <Col className=\"col-sm-2\">\r\n                                <Route render={({history}) => (\r\n                                    <Button className=\"btn-secondary\" size=\"sm\" onClick={() => history.push('/management')} >Manage</Button>\r\n                                )}/>\r\n                            </Col>\r\n                        </Row>\r\n                        }\r\n                    </Form>\r\n                    </Container>\r\n                </Collapse>\r\n\r\n                <div style={{width:\"100%\", textAlign:\"center\"}}>\r\n                <a className=\"ml-1 mr-1 text-secondary\"\r\n                 href=\"#\" onClick={(event) => {\r\n                    event.preventDefault();\r\n                    event.stopPropagation();\r\n                    this.setState({showLogin:!this.state.showLogin});\r\n                }}\r\n                   style={{\r\n                       outline:'0',\r\n                       textDecoration:'none',\r\n                       fontSize:'2rem',\r\n                       fontWeight:'Bold',\r\n                       paddingLeft: \"1rem\",\r\n                       paddingRight: \"1rem\"\r\n                   }}\r\n                >\r\n                    <img border=\"0\" alt=\"...\" src=\"/favicon.png\" height=\"150\" width=\"150\"/>\r\n                </a>\r\n                </div>\r\n            </HashRouter>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    const conf = state.ConfigReducer;\r\n    return {\r\n        articles: article.articles,\r\n        article_info: article.article_info,\r\n        filter: article.filter,\r\n        isAuthenticated: auth.isAuthenticated,\r\n        errorMessage: auth.errorMessage,\r\n        isMobileDevice: conf.isMobileDevice,\r\n        offsetTop: conf.offsetTop,\r\n        articlesAvailable: article.articles_available,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {\r\n    loginUser,\r\n    logoutUser,\r\n    setArticleFilter,\r\n    setMobileDevice,\r\n    setOffsetTop,\r\n    getArticlesByKeyWord,\r\n})(Routes);","import React,{Component} from \"react\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport {getManageArticles, gotoArticle, deleteArticle} from \"../actions/article\";\r\nimport {getStatistics, resetStatistics} from '../actions/authentication';\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\nimport Spinner from \"react-bootstrap/Spinner\";\r\n\r\nclass ManagementPage extends Component{\r\n    constructor(){\r\n        super();\r\n        this.state = ({\r\n            createArticle: false,\r\n            statistics: null,\r\n        });\r\n    }\r\n\r\n    componentDidMount(){\r\n        // Make sure to get all - manage\r\n        this.props.getManageArticles();\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n            {this.props.isAuthenticated &&\r\n            <Container style={{padding: \"2rem\"}}>\r\n\r\n                <Row className=\"m-2\">\r\n                    <Col>\r\n                        <a style={{fontWeight: 'Bold', fontSize: '1.5rem'}}>Manage articles</a>\r\n                    </Col>\r\n                    <Col>\r\n                        <Route render={({history}) => (\r\n                            <Button size=\"sm\" onClick={() => {\r\n                                history.push({pathname: '/create', state: {edit: false, article: null}});\r\n                            }\r\n                            }\r\n                            >New Article</Button>\r\n                        )}/>\r\n                    </Col>\r\n                </Row>\r\n                <Container>\r\n                    {this.props.loading &&\r\n                        <div className=\"text-center m-5\">\r\n                            <Spinner animation=\"border\" variant=\"success\"/>\r\n                        </div>\r\n                    }\r\n                    {this.props.articles.map((article, index) => (\r\n\r\n                        <Card key={index} className=\"mt-1 bg-light\" style={{border: 'none'}} draggable={true}\r\n                            /*onDragOver={(evt) => {\r\n                                evt.preventDefault();\r\n                                console.log(\"over\")\r\n                            }}\r\n                            onDragStart={(evt) => {\r\n                                evt.dataTransfer.setData(\"article-id\",article._id);\r\n                                evt.dataTransfer.setData(\"article-order\",index);\r\n                                console.log(\"drag\");\r\n                            }}\r\n                            onDrop={(evt) => {\r\n                                console.log(article._id);\r\n                                console.log(evt.dataTransfer.getData(\"article-id\"));\r\n                            }}*/\r\n                        >\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col md={8}>\r\n                                        <Card.Text style={{fontSize: '1rem'}}>{article.title}</Card.Text>\r\n                                    </Col>\r\n\r\n                                    <Col md={2}>\r\n                                        {/*<input className=\"mr-2\" id=\"publish\" type=\"checkbox\" disabled={true} defaultChecked={article.published}/>\r\n                                            <label htmlFor=\"publish\">Published</label>*/}\r\n                                        <Badge\r\n                                            variant={article.published ? \"success\" : \"dark\"}>{article.published ? 'Published' : 'Not Published'}</Badge>\r\n                                    </Col>\r\n                                    <Col md={2}>\r\n                                        <Button size=\"sm bg-danger\" className=\"m-1\" style={{border: 'none'}}\r\n                                                onClick={() => {\r\n                                                    let _this = this;\r\n                                                    this.props.deleteArticle(article._id, () => _this.props.getManageArticles());\r\n                                                }}\r\n                                        >Delete</Button>\r\n                                        <Route render={({history}) => (\r\n                                            <Button size=\"sm\" className=\"m-1 bg-secondary\" style={{border: 'none'}}\r\n                                                    onClick={() => {\r\n                                                        history.push({\r\n                                                            pathname: '/create',\r\n                                                            state: {edit: true, article: article}\r\n                                                        });\r\n\r\n                                                    }\r\n                                                    }\r\n                                            >Edit</Button>\r\n                                        )}/>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    ))}\r\n\r\n                    <a style={{fontWeight: 'Bold', fontSize: '1.5rem', marginTop:'2rem'}}>Statistics</a>\r\n                    {this.state.statistics !== null ?\r\n                    <Container>\r\n                        <a style={{fontWeight: 'Bold'}}>Requests/Page visits</a>\r\n                        <Badge variant=\"secondary\" className=\"m-1\">{this.state.statistics.length}</Badge>\r\n                        <br/>\r\n                        <Button size=\"sm\" className=\"m-1\" onClick={() => {\r\n                            let _this = this;\r\n                            this.props.resetStatistics(() => {\r\n                                _this.setState({statistics: []})\r\n                            });\r\n                        }}>Reset</Button>\r\n                    </Container>\r\n                    :\r\n                    <Container>\r\n                        <Button size=\"sm\" className=\"m-1\" onClick={() => {\r\n                            let _this = this;\r\n                            this.props.getStatistics((stats) => _this.setState({statistics:stats}));\r\n                        }}>Load</Button>\r\n                    </Container>\r\n                    }\r\n                </Container>\r\n            </Container>\r\n            }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    const auth = state.AuthReducer;\r\n    return {\r\n        articles: article.manage_articles,\r\n        loading: article.loading_articles,\r\n        isAuthenticated: auth.isAuthenticated\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    getManageArticles,\r\n    gotoArticle,\r\n    deleteArticle,\r\n    getStatistics,\r\n    resetStatistics\r\n})(ManagementPage);","import React,{Component} from \"react\";\r\nimport Row from \"react-bootstrap/Row\";\r\n\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport InputGroup from \"react-bootstrap/InputGroup\";\r\nimport FormControl from \"react-bootstrap/FormControl\";\r\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nimport {Route} from \"react-router-dom\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport SimpleArticle from \"../templates/SimpleArticle\";\r\nimport {createArticle, updateArticle} from \"../actions/article\";\r\nimport connect from \"react-redux/es/connect/connect\";\r\nimport CustomArticle from \"../templates/CustomArticle\";\r\n\r\n\r\nclass CreateArticlePage extends Component{\r\n    constructor(props){\r\n        super();\r\n\r\n        this.getArticleLayoutData.bind(this);\r\n\r\n        if(props.location.state !== undefined && props.location.state.edit){\r\n            this.state = ({\r\n                selectedLayout: props.location.state.article.template,\r\n                paragraphs: 0,\r\n                preview: false,\r\n                title: props.location.state.article.title,\r\n                titleimg_url: props.location.state.article.titleimg_url,\r\n                date: new Date(props.location.state.article.date).toISOString(),\r\n                author: props.location.state.article.author,\r\n                lead: props.location.state.article.lead,\r\n                sources: props.location.state.article.sources,\r\n                tags: props.location.state.article.tags,\r\n                template: props.location.state.article.template,\r\n                layoutData: this.getArticleLayoutData(props.location.state.article),\r\n                publish:props.location.state.article.published,\r\n            });\r\n        } else {\r\n            this.state = ({\r\n                selectedLayout: \"Layout template\",\r\n                paragraphs: 0,\r\n                preview: false,\r\n                title: \"\",\r\n                titleimg_url: \"\",\r\n                date: new Date().toISOString(),\r\n                author: \"\",\r\n                lead: \"\",\r\n                sources: \"\",\r\n                tags: \"\",\r\n                template: \"\",\r\n                layoutData: null,\r\n                publish:false,\r\n                layoutDataCallback:null,\r\n            });\r\n        }\r\n\r\n        this.publishNode = React.createRef();\r\n\r\n        this.renderLayout.bind(this);\r\n        this.saveArticle.bind(this);\r\n        this.setLayoutData.bind(this);\r\n\r\n        this.article = {\r\n            title:this.state.title,\r\n            titleimg_url:this.state.titleimg_url,\r\n            date:this.state.date,\r\n            author:this.state.author,\r\n            lead:this.state.lead,\r\n            sources:this.state.sources,\r\n            tags:this.state.tags,\r\n            template:this.state.template,\r\n        }\r\n    }\r\n\r\n    getArticleLayoutData(article){\r\n        switch (article.template) {\r\n            case \"Simple\":\r\n                console.log(article.layoutData.text);\r\n                return {text:article.layoutData.text};\r\n            case \"Custom\":\r\n                return article.layoutData;\r\n            default:\r\n                return {text:\"\", img_url:\"\"}\r\n        }\r\n    }\r\n\r\n\r\n\r\n    setLayoutData(data){\r\n        console.log(\"setting layout data\");\r\n        this.setState({\r\n            layoutData: data,\r\n        })\r\n    }\r\n\r\n    saveArticle(){\r\n        let layoutdata = this.state.layoutDataCallback();\r\n        let data = layoutdata.layoutData;\r\n        console.log(data);\r\n\r\n        if(!this.props.location.state.edit) {\r\n            let newArticle = {\r\n                title:this.state.title,\r\n                titleimg_url:this.state.titleimg_url,\r\n                date:this.state.date,\r\n                author:this.state.author,\r\n                lead:this.state.lead,\r\n                sources:this.state.sources,\r\n                tags:this.state.tags,\r\n                template:this.state.template,\r\n                layoutData: data,\r\n                published: this.publishNode.checked,\r\n            };\r\n            this.props.createArticle(newArticle);\r\n        } else {\r\n            let newArticle = {\r\n                _id: this.props.location.state.article._id,\r\n                title:this.state.title === \"\" ? this.props.location.state.article.title : this.state.title,\r\n                titleimg_url:this.state.titleimg_url === \"\" ? this.props.location.state.article.titleimg_url : this.state.titleimg_url,\r\n                date:this.state.date=== \"\" ? this.props.location.state.article.date: this.state.date,\r\n                author:this.state.author === \"\" ? this.props.location.state.article.author : this.state.author,\r\n                lead:this.state.lead === \"\" ? this.props.location.state.article.lead : this.state.lead,\r\n                sources:this.state.sources === \"\" ? this.props.location.state.article.sources : this.state.sources,\r\n                tags:this.state.tags === \"\" ? this.props.location.state.article.tags : this.state.tags,\r\n                template:this.state.template === \"\" ? this.props.location.state.article.template : this.state.template,\r\n                published: this.publishNode.checked,\r\n                layoutData:data,\r\n                //...data,\r\n            };\r\n            this.props.updateArticle(newArticle);\r\n        }\r\n    }\r\n\r\n    renderLayout(event){\r\n        this.setState({\r\n            selectedLayout:event,\r\n            template:event,\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div style={{padding:\"1rem\"}}>\r\n                <h2>Create new article</h2>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Article Title:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"title\"\r\n                        aria-label=\"title\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.title}\r\n                        onChange = {(event) => this.setState({title:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Title Image URL:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"url\"\r\n                        aria-label=\"url\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.titleimg_url}\r\n                        onChange = {(event) => this.setState({titleimg_url:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Date:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        type=\"date\"\r\n                        placeholder=\"date\"\r\n                        aria-label=\"date\"\r\n                        aria-describedby=\"date\"\r\n                        defaultValue={new Date(this.state.date).toISOString().split(\"T\")[0]}\r\n                        //value =\r\n                        onChange = {(event) => this.setState({date:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Author:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"author name\"\r\n                        aria-label=\"Author\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.author}\r\n                        onChange = {(event) => this.setState({author:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                      <InputGroup.Text>Lead:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        as=\"textarea\"\r\n                        placeholder=\"lead text\"\r\n                        aria-label=\"Lead\"\r\n                        defaultValue = {this.state.lead}\r\n                        onChange = {(event) => this.setState({lead:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Sources:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"sources\"\r\n                        aria-label=\"sources\"\r\n                        aria-describedby=\"label\"\r\n                        defaultValue = {this.state.sources}\r\n                        onChange = {(event) => this.setState({sources:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mt-3\">\r\n                    <InputGroup.Prepend>\r\n                        <InputGroup.Text id=\"label\">Tags:</InputGroup.Text>\r\n                    </InputGroup.Prepend>\r\n                    <FormControl\r\n                        placeholder=\"tags separated by comma\"\r\n                        aria-label=\"tags\"\r\n                        aria-describedby=\"tags\"\r\n                        defaultValue = {this.state.tags}\r\n                        onChange = {(event) => this.setState({tags:event.target.value})}\r\n                    />\r\n                </InputGroup>\r\n\r\n                <InputGroup className=\"mt-3 mb-3\">\r\n                    <DropdownButton\r\n                        as={InputGroup.Prepend}\r\n                        variant=\"outline-secondary\"\r\n                        title={this.state.selectedLayout}\r\n                        id=\"input-group-dropdown-1\"\r\n                        onSelect={(event) => {\r\n                            this.renderLayout(event);\r\n                        }}\r\n                    >\r\n                      <Dropdown.Item eventKey=\"Simple\">Simple</Dropdown.Item>\r\n                      <Dropdown.Item eventKey=\"Custom\">Custom</Dropdown.Item>\r\n                    </DropdownButton>\r\n\r\n                </InputGroup>\r\n\r\n                {this.state.selectedLayout !== \"Layout template\" &&\r\n                    <h3>{this.state.selectedLayout} Article Layout</h3>\r\n                }\r\n\r\n            {this.state.selectedLayout === \"Simple\" &&\r\n                <div mt={2}>\r\n                <SimpleArticle\r\n                    editArticle={true}\r\n                    showArticle={this.state.preview}\r\n\r\n                    title={this.state.title}\r\n                    titleimg_url={this.state.titleimg_url}\r\n                    author={this.state.author}\r\n                    lead={this.state.lead}\r\n                    sources={this.state.sources}\r\n                    tags={this.state.tags}\r\n                    date={this.state.date}\r\n\r\n                    layoutData={this.state.layoutData == null ? {text:\"\", img_url:\"\"} : this.state.layoutData}\r\n                    updateLayoutData={(callback) => this.state.selectedLayout === \"Simple\" && this.setState({layoutDataCallback: callback})}\r\n                    //layoutDataCallback={(data) => this.setLayoutData(data)}\r\n                />\r\n                </div>\r\n            }\r\n\r\n            {this.state.selectedLayout === \"Custom\" &&\r\n                <div mt={2}>\r\n                    <CustomArticle\r\n                        editArticle={true}\r\n                        showArticle={this.state.preview}\r\n\r\n                        title={this.state.title}\r\n                        titleimg_url={this.state.titleimg_url}\r\n                        author={this.state.author}\r\n                        lead={this.state.lead}\r\n                        sources={this.state.sources}\r\n                        tags={this.state.tags}\r\n                        date={this.state.date}\r\n\r\n                        layoutData={this.state.layoutData}\r\n                        updateLayoutData={(callback) => this.state.selectedLayout === \"Custom\" && this.setState({layoutDataCallback: callback})}\r\n                        //layoutDataCallback={(data) => this.setLayoutData(data)}\r\n                    />\r\n                </div>\r\n            }\r\n\r\n            {this.state.selectedLayout !== \"Layout template\" &&\r\n                <Button style={{marginTop:\"2rem\"}} size=\"sm\" onClick={() => this.setState({preview:!this.state.preview})}>\r\n\r\n                    {this.state.preview &&\r\n                    <a>Hide preview</a>\r\n                    }\r\n                    {!this.state.preview &&\r\n                    <a>Show preview</a>\r\n                    }\r\n\r\n                </Button>\r\n            }\r\n            <hr/>\r\n            <Container style={{marginTop:\"2rem\"}}>\r\n            <Row>\r\n                <Col md={2} m={1}>\r\n                    <input ref={ref => this.publishNode = ref}\r\n                        defaultChecked = {this.state.publish}\r\n                        className=\"mr-2\" id=\"publish\" type=\"checkbox\" onChange={(event) => {\r\n                            this.setState({publish:event.target.checked});\r\n                    }}/>\r\n                    <label htmlFor=\"publish\">Publish</label>\r\n                </Col>\r\n                <Col md={2}>\r\n                    <Route render={({history}) => (\r\n                        <Button className=\"m-1\" size=\"sm\" onClick={() => {\r\n                            this.saveArticle();\r\n                            history.push('/management');\r\n                        }} >Save</Button>\r\n                    )}/>\r\n                </Col>\r\n                <Col md={2}>\r\n                    <Route render={({history}) => (\r\n                        <Button className=\"m-1\" size=\"sm\" onClick={() => history.push('/management')} >Cancel</Button>\r\n                    )}/>\r\n                </Col>\r\n            </Row>\r\n            </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    const article = state.ArticleReducer;\r\n    return {\r\n        articles: article.articles,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps,{\r\n    createArticle,\r\n    updateArticle\r\n})(CreateArticlePage);"],"sourceRoot":""}